{
  "version": 3,
  "sources": ["../node_modules/nearley/lib/nearley.js", "../node_modules/ramda/es/internal/_isPlaceholder.js", "../node_modules/ramda/es/internal/_curry1.js", "../node_modules/ramda/es/internal/_curry2.js", "../node_modules/ramda/es/internal/_arity.js", "../node_modules/ramda/es/internal/_curryN.js", "../node_modules/ramda/es/curryN.js", "../node_modules/ramda/es/internal/_curry3.js", "../node_modules/ramda/es/internal/_isArray.js", "../node_modules/ramda/es/internal/_isTransformer.js", "../node_modules/ramda/es/internal/_dispatchable.js", "../node_modules/ramda/es/internal/_xfBase.js", "../node_modules/ramda/es/internal/_map.js", "../node_modules/ramda/es/internal/_isString.js", "../node_modules/ramda/es/internal/_isArrayLike.js", "../node_modules/ramda/es/internal/_xwrap.js", "../node_modules/ramda/es/bind.js", "../node_modules/ramda/es/internal/_reduce.js", "../node_modules/ramda/es/internal/_xmap.js", "../node_modules/ramda/es/internal/_has.js", "../node_modules/ramda/es/internal/_isArguments.js", "../node_modules/ramda/es/keys.js", "../node_modules/ramda/es/map.js", "../node_modules/ramda/es/internal/_isInteger.js", "../node_modules/ramda/es/reduce.js", "../node_modules/ramda/es/internal/_pipe.js", "../node_modules/ramda/es/internal/_checkForMethod.js", "../node_modules/ramda/es/slice.js", "../node_modules/ramda/es/tail.js", "../node_modules/ramda/es/pipe.js", "../node_modules/ramda/es/internal/_toISOString.js", "../node_modules/ramda/es/internal/_complement.js", "../node_modules/ramda/es/internal/_filter.js", "../node_modules/ramda/es/internal/_isObject.js", "../node_modules/ramda/es/internal/_xfilter.js", "../node_modules/ramda/es/filter.js", "../node_modules/ramda/es/reject.js", "../node_modules/ramda/es/is.js", "../node_modules/ramda/es/trim.js", "../node_modules/ramda/es/when.js", "../src/lib/number.mod.ts", "../src/lib/nearley_utils.ts", "../src/grammars/.bracketexpr.generated.ts", "../src/lib/keyseq.ts", "../src/lib/binding.ts", "../src/lib/platform.ts", "../src/lib/config.ts", "../src/help.ts"],
  "sourcesContent": ["(function(root, factory) {\n    if (typeof module === 'object' && module.exports) {\n        module.exports = factory();\n    } else {\n        root.nearley = factory();\n    }\n}(this, function() {\n\n    function Rule(name, symbols, postprocess) {\n        this.id = ++Rule.highestId;\n        this.name = name;\n        this.symbols = symbols;        // a list of literal | regex class | nonterminal\n        this.postprocess = postprocess;\n        return this;\n    }\n    Rule.highestId = 0;\n\n    Rule.prototype.toString = function(withCursorAt) {\n        var symbolSequence = (typeof withCursorAt === \"undefined\")\n                             ? this.symbols.map(getSymbolShortDisplay).join(' ')\n                             : (   this.symbols.slice(0, withCursorAt).map(getSymbolShortDisplay).join(' ')\n                                 + \" \u25CF \"\n                                 + this.symbols.slice(withCursorAt).map(getSymbolShortDisplay).join(' ')     );\n        return this.name + \" \u2192 \" + symbolSequence;\n    }\n\n\n    // a State is a rule at a position from a given starting point in the input stream (reference)\n    function State(rule, dot, reference, wantedBy) {\n        this.rule = rule;\n        this.dot = dot;\n        this.reference = reference;\n        this.data = [];\n        this.wantedBy = wantedBy;\n        this.isComplete = this.dot === rule.symbols.length;\n    }\n\n    State.prototype.toString = function() {\n        return \"{\" + this.rule.toString(this.dot) + \"}, from: \" + (this.reference || 0);\n    };\n\n    State.prototype.nextState = function(child) {\n        var state = new State(this.rule, this.dot + 1, this.reference, this.wantedBy);\n        state.left = this;\n        state.right = child;\n        if (state.isComplete) {\n            state.data = state.build();\n            // Having right set here will prevent the right state and its children\n            // form being garbage collected\n            state.right = undefined;\n        }\n        return state;\n    };\n\n    State.prototype.build = function() {\n        var children = [];\n        var node = this;\n        do {\n            children.push(node.right.data);\n            node = node.left;\n        } while (node.left);\n        children.reverse();\n        return children;\n    };\n\n    State.prototype.finish = function() {\n        if (this.rule.postprocess) {\n            this.data = this.rule.postprocess(this.data, this.reference, Parser.fail);\n        }\n    };\n\n\n    function Column(grammar, index) {\n        this.grammar = grammar;\n        this.index = index;\n        this.states = [];\n        this.wants = {}; // states indexed by the non-terminal they expect\n        this.scannable = []; // list of states that expect a token\n        this.completed = {}; // states that are nullable\n    }\n\n\n    Column.prototype.process = function(nextColumn) {\n        var states = this.states;\n        var wants = this.wants;\n        var completed = this.completed;\n\n        for (var w = 0; w < states.length; w++) { // nb. we push() during iteration\n            var state = states[w];\n\n            if (state.isComplete) {\n                state.finish();\n                if (state.data !== Parser.fail) {\n                    // complete\n                    var wantedBy = state.wantedBy;\n                    for (var i = wantedBy.length; i--; ) { // this line is hot\n                        var left = wantedBy[i];\n                        this.complete(left, state);\n                    }\n\n                    // special-case nullables\n                    if (state.reference === this.index) {\n                        // make sure future predictors of this rule get completed.\n                        var exp = state.rule.name;\n                        (this.completed[exp] = this.completed[exp] || []).push(state);\n                    }\n                }\n\n            } else {\n                // queue scannable states\n                var exp = state.rule.symbols[state.dot];\n                if (typeof exp !== 'string') {\n                    this.scannable.push(state);\n                    continue;\n                }\n\n                // predict\n                if (wants[exp]) {\n                    wants[exp].push(state);\n\n                    if (completed.hasOwnProperty(exp)) {\n                        var nulls = completed[exp];\n                        for (var i = 0; i < nulls.length; i++) {\n                            var right = nulls[i];\n                            this.complete(state, right);\n                        }\n                    }\n                } else {\n                    wants[exp] = [state];\n                    this.predict(exp);\n                }\n            }\n        }\n    }\n\n    Column.prototype.predict = function(exp) {\n        var rules = this.grammar.byName[exp] || [];\n\n        for (var i = 0; i < rules.length; i++) {\n            var r = rules[i];\n            var wantedBy = this.wants[exp];\n            var s = new State(r, 0, this.index, wantedBy);\n            this.states.push(s);\n        }\n    }\n\n    Column.prototype.complete = function(left, right) {\n        var copy = left.nextState(right);\n        this.states.push(copy);\n    }\n\n\n    function Grammar(rules, start) {\n        this.rules = rules;\n        this.start = start || this.rules[0].name;\n        var byName = this.byName = {};\n        this.rules.forEach(function(rule) {\n            if (!byName.hasOwnProperty(rule.name)) {\n                byName[rule.name] = [];\n            }\n            byName[rule.name].push(rule);\n        });\n    }\n\n    // So we can allow passing (rules, start) directly to Parser for backwards compatibility\n    Grammar.fromCompiled = function(rules, start) {\n        var lexer = rules.Lexer;\n        if (rules.ParserStart) {\n          start = rules.ParserStart;\n          rules = rules.ParserRules;\n        }\n        var rules = rules.map(function (r) { return (new Rule(r.name, r.symbols, r.postprocess)); });\n        var g = new Grammar(rules, start);\n        g.lexer = lexer; // nb. storing lexer on Grammar is iffy, but unavoidable\n        return g;\n    }\n\n\n    function StreamLexer() {\n      this.reset(\"\");\n    }\n\n    StreamLexer.prototype.reset = function(data, state) {\n        this.buffer = data;\n        this.index = 0;\n        this.line = state ? state.line : 1;\n        this.lastLineBreak = state ? -state.col : 0;\n    }\n\n    StreamLexer.prototype.next = function() {\n        if (this.index < this.buffer.length) {\n            var ch = this.buffer[this.index++];\n            if (ch === '\\n') {\n              this.line += 1;\n              this.lastLineBreak = this.index;\n            }\n            return {value: ch};\n        }\n    }\n\n    StreamLexer.prototype.save = function() {\n      return {\n        line: this.line,\n        col: this.index - this.lastLineBreak,\n      }\n    }\n\n    StreamLexer.prototype.formatError = function(token, message) {\n        // nb. this gets called after consuming the offending token,\n        // so the culprit is index-1\n        var buffer = this.buffer;\n        if (typeof buffer === 'string') {\n            var lines = buffer\n                .split(\"\\n\")\n                .slice(\n                    Math.max(0, this.line - 5), \n                    this.line\n                );\n\n            var nextLineBreak = buffer.indexOf('\\n', this.index);\n            if (nextLineBreak === -1) nextLineBreak = buffer.length;\n            var col = this.index - this.lastLineBreak;\n            var lastLineDigits = String(this.line).length;\n            message += \" at line \" + this.line + \" col \" + col + \":\\n\\n\";\n            message += lines\n                .map(function(line, i) {\n                    return pad(this.line - lines.length + i + 1, lastLineDigits) + \" \" + line;\n                }, this)\n                .join(\"\\n\");\n            message += \"\\n\" + pad(\"\", lastLineDigits + col) + \"^\\n\";\n            return message;\n        } else {\n            return message + \" at index \" + (this.index - 1);\n        }\n\n        function pad(n, length) {\n            var s = String(n);\n            return Array(length - s.length + 1).join(\" \") + s;\n        }\n    }\n\n    function Parser(rules, start, options) {\n        if (rules instanceof Grammar) {\n            var grammar = rules;\n            var options = start;\n        } else {\n            var grammar = Grammar.fromCompiled(rules, start);\n        }\n        this.grammar = grammar;\n\n        // Read options\n        this.options = {\n            keepHistory: false,\n            lexer: grammar.lexer || new StreamLexer,\n        };\n        for (var key in (options || {})) {\n            this.options[key] = options[key];\n        }\n\n        // Setup lexer\n        this.lexer = this.options.lexer;\n        this.lexerState = undefined;\n\n        // Setup a table\n        var column = new Column(grammar, 0);\n        var table = this.table = [column];\n\n        // I could be expecting anything.\n        column.wants[grammar.start] = [];\n        column.predict(grammar.start);\n        // TODO what if start rule is nullable?\n        column.process();\n        this.current = 0; // token index\n    }\n\n    // create a reserved token for indicating a parse fail\n    Parser.fail = {};\n\n    Parser.prototype.feed = function(chunk) {\n        var lexer = this.lexer;\n        lexer.reset(chunk, this.lexerState);\n\n        var token;\n        while (true) {\n            try {\n                token = lexer.next();\n                if (!token) {\n                    break;\n                }\n            } catch (e) {\n                // Create the next column so that the error reporter\n                // can display the correctly predicted states.\n                var nextColumn = new Column(this.grammar, this.current + 1);\n                this.table.push(nextColumn);\n                var err = new Error(this.reportLexerError(e));\n                err.offset = this.current;\n                err.token = e.token;\n                throw err;\n            }\n            // We add new states to table[current+1]\n            var column = this.table[this.current];\n\n            // GC unused states\n            if (!this.options.keepHistory) {\n                delete this.table[this.current - 1];\n            }\n\n            var n = this.current + 1;\n            var nextColumn = new Column(this.grammar, n);\n            this.table.push(nextColumn);\n\n            // Advance all tokens that expect the symbol\n            var literal = token.text !== undefined ? token.text : token.value;\n            var value = lexer.constructor === StreamLexer ? token.value : token;\n            var scannable = column.scannable;\n            for (var w = scannable.length; w--; ) {\n                var state = scannable[w];\n                var expect = state.rule.symbols[state.dot];\n                // Try to consume the token\n                // either regex or literal\n                if (expect.test ? expect.test(value) :\n                    expect.type ? expect.type === token.type\n                                : expect.literal === literal) {\n                    // Add it\n                    var next = state.nextState({data: value, token: token, isToken: true, reference: n - 1});\n                    nextColumn.states.push(next);\n                }\n            }\n\n            // Next, for each of the rules, we either\n            // (a) complete it, and try to see if the reference row expected that\n            //     rule\n            // (b) predict the next nonterminal it expects by adding that\n            //     nonterminal's start state\n            // To prevent duplication, we also keep track of rules we have already\n            // added\n\n            nextColumn.process();\n\n            // If needed, throw an error:\n            if (nextColumn.states.length === 0) {\n                // No states at all! This is not good.\n                var err = new Error(this.reportError(token));\n                err.offset = this.current;\n                err.token = token;\n                throw err;\n            }\n\n            // maybe save lexer state\n            if (this.options.keepHistory) {\n              column.lexerState = lexer.save()\n            }\n\n            this.current++;\n        }\n        if (column) {\n          this.lexerState = lexer.save()\n        }\n\n        // Incrementally keep track of results\n        this.results = this.finish();\n\n        // Allow chaining, for whatever it's worth\n        return this;\n    };\n\n    Parser.prototype.reportLexerError = function(lexerError) {\n        var tokenDisplay, lexerMessage;\n        // Planning to add a token property to moo's thrown error\n        // even on erroring tokens to be used in error display below\n        var token = lexerError.token;\n        if (token) {\n            tokenDisplay = \"input \" + JSON.stringify(token.text[0]) + \" (lexer error)\";\n            lexerMessage = this.lexer.formatError(token, \"Syntax error\");\n        } else {\n            tokenDisplay = \"input (lexer error)\";\n            lexerMessage = lexerError.message;\n        }\n        return this.reportErrorCommon(lexerMessage, tokenDisplay);\n    };\n\n    Parser.prototype.reportError = function(token) {\n        var tokenDisplay = (token.type ? token.type + \" token: \" : \"\") + JSON.stringify(token.value !== undefined ? token.value : token);\n        var lexerMessage = this.lexer.formatError(token, \"Syntax error\");\n        return this.reportErrorCommon(lexerMessage, tokenDisplay);\n    };\n\n    Parser.prototype.reportErrorCommon = function(lexerMessage, tokenDisplay) {\n        var lines = [];\n        lines.push(lexerMessage);\n        var lastColumnIndex = this.table.length - 2;\n        var lastColumn = this.table[lastColumnIndex];\n        var expectantStates = lastColumn.states\n            .filter(function(state) {\n                var nextSymbol = state.rule.symbols[state.dot];\n                return nextSymbol && typeof nextSymbol !== \"string\";\n            });\n\n        if (expectantStates.length === 0) {\n            lines.push('Unexpected ' + tokenDisplay + '. I did not expect any more input. Here is the state of my parse table:\\n');\n            this.displayStateStack(lastColumn.states, lines);\n        } else {\n            lines.push('Unexpected ' + tokenDisplay + '. Instead, I was expecting to see one of the following:\\n');\n            // Display a \"state stack\" for each expectant state\n            // - which shows you how this state came to be, step by step.\n            // If there is more than one derivation, we only display the first one.\n            var stateStacks = expectantStates\n                .map(function(state) {\n                    return this.buildFirstStateStack(state, []) || [state];\n                }, this);\n            // Display each state that is expecting a terminal symbol next.\n            stateStacks.forEach(function(stateStack) {\n                var state = stateStack[0];\n                var nextSymbol = state.rule.symbols[state.dot];\n                var symbolDisplay = this.getSymbolDisplay(nextSymbol);\n                lines.push('A ' + symbolDisplay + ' based on:');\n                this.displayStateStack(stateStack, lines);\n            }, this);\n        }\n        lines.push(\"\");\n        return lines.join(\"\\n\");\n    }\n    \n    Parser.prototype.displayStateStack = function(stateStack, lines) {\n        var lastDisplay;\n        var sameDisplayCount = 0;\n        for (var j = 0; j < stateStack.length; j++) {\n            var state = stateStack[j];\n            var display = state.rule.toString(state.dot);\n            if (display === lastDisplay) {\n                sameDisplayCount++;\n            } else {\n                if (sameDisplayCount > 0) {\n                    lines.push('    ^ ' + sameDisplayCount + ' more lines identical to this');\n                }\n                sameDisplayCount = 0;\n                lines.push('    ' + display);\n            }\n            lastDisplay = display;\n        }\n    };\n\n    Parser.prototype.getSymbolDisplay = function(symbol) {\n        return getSymbolLongDisplay(symbol);\n    };\n\n    /*\n    Builds a the first state stack. You can think of a state stack as the call stack\n    of the recursive-descent parser which the Nearley parse algorithm simulates.\n    A state stack is represented as an array of state objects. Within a\n    state stack, the first item of the array will be the starting\n    state, with each successive item in the array going further back into history.\n\n    This function needs to be given a starting state and an empty array representing\n    the visited states, and it returns an single state stack.\n\n    */\n    Parser.prototype.buildFirstStateStack = function(state, visited) {\n        if (visited.indexOf(state) !== -1) {\n            // Found cycle, return null\n            // to eliminate this path from the results, because\n            // we don't know how to display it meaningfully\n            return null;\n        }\n        if (state.wantedBy.length === 0) {\n            return [state];\n        }\n        var prevState = state.wantedBy[0];\n        var childVisited = [state].concat(visited);\n        var childResult = this.buildFirstStateStack(prevState, childVisited);\n        if (childResult === null) {\n            return null;\n        }\n        return [state].concat(childResult);\n    };\n\n    Parser.prototype.save = function() {\n        var column = this.table[this.current];\n        column.lexerState = this.lexerState;\n        return column;\n    };\n\n    Parser.prototype.restore = function(column) {\n        var index = column.index;\n        this.current = index;\n        this.table[index] = column;\n        this.table.splice(index + 1);\n        this.lexerState = column.lexerState;\n\n        // Incrementally keep track of results\n        this.results = this.finish();\n    };\n\n    // nb. deprecated: use save/restore instead!\n    Parser.prototype.rewind = function(index) {\n        if (!this.options.keepHistory) {\n            throw new Error('set option `keepHistory` to enable rewinding')\n        }\n        // nb. recall column (table) indicies fall between token indicies.\n        //        col 0   --   token 0   --   col 1\n        this.restore(this.table[index]);\n    };\n\n    Parser.prototype.finish = function() {\n        // Return the possible parsings\n        var considerations = [];\n        var start = this.grammar.start;\n        var column = this.table[this.table.length - 1]\n        column.states.forEach(function (t) {\n            if (t.rule.name === start\n                    && t.dot === t.rule.symbols.length\n                    && t.reference === 0\n                    && t.data !== Parser.fail) {\n                considerations.push(t);\n            }\n        });\n        return considerations.map(function(c) {return c.data; });\n    };\n\n    function getSymbolLongDisplay(symbol) {\n        var type = typeof symbol;\n        if (type === \"string\") {\n            return symbol;\n        } else if (type === \"object\") {\n            if (symbol.literal) {\n                return JSON.stringify(symbol.literal);\n            } else if (symbol instanceof RegExp) {\n                return 'character matching ' + symbol;\n            } else if (symbol.type) {\n                return symbol.type + ' token';\n            } else if (symbol.test) {\n                return 'token matching ' + String(symbol.test);\n            } else {\n                throw new Error('Unknown symbol type: ' + symbol);\n            }\n        }\n    }\n\n    function getSymbolShortDisplay(symbol) {\n        var type = typeof symbol;\n        if (type === \"string\") {\n            return symbol;\n        } else if (type === \"object\") {\n            if (symbol.literal) {\n                return JSON.stringify(symbol.literal);\n            } else if (symbol instanceof RegExp) {\n                return symbol.toString();\n            } else if (symbol.type) {\n                return '%' + symbol.type;\n            } else if (symbol.test) {\n                return '<' + String(symbol.test) + '>';\n            } else {\n                throw new Error('Unknown symbol type: ' + symbol);\n            }\n        }\n    }\n\n    return {\n        Parser: Parser,\n        Grammar: Grammar,\n        Rule: Rule,\n    };\n\n}));\n", "export default function _isPlaceholder(a) {\n  return a != null && typeof a === 'object' && a['@@functional/placeholder'] === true;\n}", "import _isPlaceholder from \"./_isPlaceholder.js\";\n/**\n * Optimized internal one-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\n\nexport default function _curry1(fn) {\n  return function f1(a) {\n    if (arguments.length === 0 || _isPlaceholder(a)) {\n      return f1;\n    } else {\n      return fn.apply(this, arguments);\n    }\n  };\n}", "import _curry1 from \"./_curry1.js\";\nimport _isPlaceholder from \"./_isPlaceholder.js\";\n/**\n * Optimized internal two-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\n\nexport default function _curry2(fn) {\n  return function f2(a, b) {\n    switch (arguments.length) {\n      case 0:\n        return f2;\n\n      case 1:\n        return _isPlaceholder(a) ? f2 : _curry1(function (_b) {\n          return fn(a, _b);\n        });\n\n      default:\n        return _isPlaceholder(a) && _isPlaceholder(b) ? f2 : _isPlaceholder(a) ? _curry1(function (_a) {\n          return fn(_a, b);\n        }) : _isPlaceholder(b) ? _curry1(function (_b) {\n          return fn(a, _b);\n        }) : fn(a, b);\n    }\n  };\n}", "export default function _arity(n, fn) {\n  /* eslint-disable no-unused-vars */\n  switch (n) {\n    case 0:\n      return function () {\n        return fn.apply(this, arguments);\n      };\n\n    case 1:\n      return function (a0) {\n        return fn.apply(this, arguments);\n      };\n\n    case 2:\n      return function (a0, a1) {\n        return fn.apply(this, arguments);\n      };\n\n    case 3:\n      return function (a0, a1, a2) {\n        return fn.apply(this, arguments);\n      };\n\n    case 4:\n      return function (a0, a1, a2, a3) {\n        return fn.apply(this, arguments);\n      };\n\n    case 5:\n      return function (a0, a1, a2, a3, a4) {\n        return fn.apply(this, arguments);\n      };\n\n    case 6:\n      return function (a0, a1, a2, a3, a4, a5) {\n        return fn.apply(this, arguments);\n      };\n\n    case 7:\n      return function (a0, a1, a2, a3, a4, a5, a6) {\n        return fn.apply(this, arguments);\n      };\n\n    case 8:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        return fn.apply(this, arguments);\n      };\n\n    case 9:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        return fn.apply(this, arguments);\n      };\n\n    case 10:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {\n        return fn.apply(this, arguments);\n      };\n\n    default:\n      throw new Error('First argument to _arity must be a non-negative integer no greater than ten');\n  }\n}", "import _arity from \"./_arity.js\";\nimport _isPlaceholder from \"./_isPlaceholder.js\";\n/**\n * Internal curryN function.\n *\n * @private\n * @category Function\n * @param {Number} length The arity of the curried function.\n * @param {Array} received An array of arguments received thus far.\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\n\nexport default function _curryN(length, received, fn) {\n  return function () {\n    var combined = [];\n    var argsIdx = 0;\n    var left = length;\n    var combinedIdx = 0;\n\n    while (combinedIdx < received.length || argsIdx < arguments.length) {\n      var result;\n\n      if (combinedIdx < received.length && (!_isPlaceholder(received[combinedIdx]) || argsIdx >= arguments.length)) {\n        result = received[combinedIdx];\n      } else {\n        result = arguments[argsIdx];\n        argsIdx += 1;\n      }\n\n      combined[combinedIdx] = result;\n\n      if (!_isPlaceholder(result)) {\n        left -= 1;\n      }\n\n      combinedIdx += 1;\n    }\n\n    return left <= 0 ? fn.apply(this, combined) : _arity(left, _curryN(length, combined, fn));\n  };\n}", "import _arity from \"./internal/_arity.js\";\nimport _curry1 from \"./internal/_curry1.js\";\nimport _curry2 from \"./internal/_curry2.js\";\nimport _curryN from \"./internal/_curryN.js\";\n/**\n * Returns a curried equivalent of the provided function, with the specified\n * arity. The curried function has two unusual capabilities. First, its\n * arguments needn't be provided one at a time. If `g` is `R.curryN(3, f)`, the\n * following are equivalent:\n *\n *   - `g(1)(2)(3)`\n *   - `g(1)(2, 3)`\n *   - `g(1, 2)(3)`\n *   - `g(1, 2, 3)`\n *\n * Secondly, the special placeholder value [`R.__`](#__) may be used to specify\n * \"gaps\", allowing partial application of any combination of arguments,\n * regardless of their positions. If `g` is as above and `_` is [`R.__`](#__),\n * the following are equivalent:\n *\n *   - `g(1, 2, 3)`\n *   - `g(_, 2, 3)(1)`\n *   - `g(_, _, 3)(1)(2)`\n *   - `g(_, _, 3)(1, 2)`\n *   - `g(_, 2)(1)(3)`\n *   - `g(_, 2)(1, 3)`\n *   - `g(_, 2)(_, 3)(1)`\n *\n * @func\n * @memberOf R\n * @since v0.5.0\n * @category Function\n * @sig Number -> (* -> a) -> (* -> a)\n * @param {Number} length The arity for the returned function.\n * @param {Function} fn The function to curry.\n * @return {Function} A new, curried function.\n * @see R.curry\n * @example\n *\n *      const sumArgs = (...args) => R.sum(args);\n *\n *      const curriedAddFourNumbers = R.curryN(4, sumArgs);\n *      const f = curriedAddFourNumbers(1, 2);\n *      const g = f(3);\n *      g(4); //=> 10\n */\n\nvar curryN =\n/*#__PURE__*/\n_curry2(function curryN(length, fn) {\n  if (length === 1) {\n    return _curry1(fn);\n  }\n\n  return _arity(length, _curryN(length, [], fn));\n});\n\nexport default curryN;", "import _curry1 from \"./_curry1.js\";\nimport _curry2 from \"./_curry2.js\";\nimport _isPlaceholder from \"./_isPlaceholder.js\";\n/**\n * Optimized internal three-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\n\nexport default function _curry3(fn) {\n  return function f3(a, b, c) {\n    switch (arguments.length) {\n      case 0:\n        return f3;\n\n      case 1:\n        return _isPlaceholder(a) ? f3 : _curry2(function (_b, _c) {\n          return fn(a, _b, _c);\n        });\n\n      case 2:\n        return _isPlaceholder(a) && _isPlaceholder(b) ? f3 : _isPlaceholder(a) ? _curry2(function (_a, _c) {\n          return fn(_a, b, _c);\n        }) : _isPlaceholder(b) ? _curry2(function (_b, _c) {\n          return fn(a, _b, _c);\n        }) : _curry1(function (_c) {\n          return fn(a, b, _c);\n        });\n\n      default:\n        return _isPlaceholder(a) && _isPlaceholder(b) && _isPlaceholder(c) ? f3 : _isPlaceholder(a) && _isPlaceholder(b) ? _curry2(function (_a, _b) {\n          return fn(_a, _b, c);\n        }) : _isPlaceholder(a) && _isPlaceholder(c) ? _curry2(function (_a, _c) {\n          return fn(_a, b, _c);\n        }) : _isPlaceholder(b) && _isPlaceholder(c) ? _curry2(function (_b, _c) {\n          return fn(a, _b, _c);\n        }) : _isPlaceholder(a) ? _curry1(function (_a) {\n          return fn(_a, b, c);\n        }) : _isPlaceholder(b) ? _curry1(function (_b) {\n          return fn(a, _b, c);\n        }) : _isPlaceholder(c) ? _curry1(function (_c) {\n          return fn(a, b, _c);\n        }) : fn(a, b, c);\n    }\n  };\n}", "/**\n * Tests whether or not an object is an array.\n *\n * @private\n * @param {*} val The object to test.\n * @return {Boolean} `true` if `val` is an array, `false` otherwise.\n * @example\n *\n *      _isArray([]); //=> true\n *      _isArray(null); //=> false\n *      _isArray({}); //=> false\n */\nexport default Array.isArray || function _isArray(val) {\n  return val != null && val.length >= 0 && Object.prototype.toString.call(val) === '[object Array]';\n};", "export default function _isTransformer(obj) {\n  return obj != null && typeof obj['@@transducer/step'] === 'function';\n}", "import _isArray from \"./_isArray.js\";\nimport _isTransformer from \"./_isTransformer.js\";\n/**\n * Returns a function that dispatches with different strategies based on the\n * object in list position (last argument). If it is an array, executes [fn].\n * Otherwise, if it has a function with one of the given method names, it will\n * execute that function (functor case). Otherwise, if it is a transformer,\n * uses transducer created by [transducerCreator] to return a new transformer\n * (transducer case).\n * Otherwise, it will default to executing [fn].\n *\n * @private\n * @param {Array} methodNames properties to check for a custom implementation\n * @param {Function} transducerCreator transducer factory if object is transformer\n * @param {Function} fn default ramda implementation\n * @return {Function} A function that dispatches on object in list position\n */\n\nexport default function _dispatchable(methodNames, transducerCreator, fn) {\n  return function () {\n    if (arguments.length === 0) {\n      return fn();\n    }\n\n    var obj = arguments[arguments.length - 1];\n\n    if (!_isArray(obj)) {\n      var idx = 0;\n\n      while (idx < methodNames.length) {\n        if (typeof obj[methodNames[idx]] === 'function') {\n          return obj[methodNames[idx]].apply(obj, Array.prototype.slice.call(arguments, 0, -1));\n        }\n\n        idx += 1;\n      }\n\n      if (_isTransformer(obj)) {\n        var transducer = transducerCreator.apply(null, Array.prototype.slice.call(arguments, 0, -1));\n        return transducer(obj);\n      }\n    }\n\n    return fn.apply(this, arguments);\n  };\n}", "export default {\n  init: function () {\n    return this.xf['@@transducer/init']();\n  },\n  result: function (result) {\n    return this.xf['@@transducer/result'](result);\n  }\n};", "export default function _map(fn, functor) {\n  var idx = 0;\n  var len = functor.length;\n  var result = Array(len);\n\n  while (idx < len) {\n    result[idx] = fn(functor[idx]);\n    idx += 1;\n  }\n\n  return result;\n}", "export default function _isString(x) {\n  return Object.prototype.toString.call(x) === '[object String]';\n}", "import _curry1 from \"./_curry1.js\";\nimport _isArray from \"./_isArray.js\";\nimport _isString from \"./_isString.js\";\n/**\n * Tests whether or not an object is similar to an array.\n *\n * @private\n * @category Type\n * @category List\n * @sig * -> Boolean\n * @param {*} x The object to test.\n * @return {Boolean} `true` if `x` has a numeric length property and extreme indices defined; `false` otherwise.\n * @example\n *\n *      _isArrayLike([]); //=> true\n *      _isArrayLike(true); //=> false\n *      _isArrayLike({}); //=> false\n *      _isArrayLike({length: 10}); //=> false\n *      _isArrayLike({0: 'zero', 9: 'nine', length: 10}); //=> true\n *      _isArrayLike({nodeType: 1, length: 1}) // => false\n */\n\nvar _isArrayLike =\n/*#__PURE__*/\n_curry1(function isArrayLike(x) {\n  if (_isArray(x)) {\n    return true;\n  }\n\n  if (!x) {\n    return false;\n  }\n\n  if (typeof x !== 'object') {\n    return false;\n  }\n\n  if (_isString(x)) {\n    return false;\n  }\n\n  if (x.length === 0) {\n    return true;\n  }\n\n  if (x.length > 0) {\n    return x.hasOwnProperty(0) && x.hasOwnProperty(x.length - 1);\n  }\n\n  return false;\n});\n\nexport default _isArrayLike;", "var XWrap =\n/*#__PURE__*/\nfunction () {\n  function XWrap(fn) {\n    this.f = fn;\n  }\n\n  XWrap.prototype['@@transducer/init'] = function () {\n    throw new Error('init not implemented on XWrap');\n  };\n\n  XWrap.prototype['@@transducer/result'] = function (acc) {\n    return acc;\n  };\n\n  XWrap.prototype['@@transducer/step'] = function (acc, x) {\n    return this.f(acc, x);\n  };\n\n  return XWrap;\n}();\n\nexport default function _xwrap(fn) {\n  return new XWrap(fn);\n}", "import _arity from \"./internal/_arity.js\";\nimport _curry2 from \"./internal/_curry2.js\";\n/**\n * Creates a function that is bound to a context.\n * Note: `R.bind` does not provide the additional argument-binding capabilities of\n * [Function.prototype.bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).\n *\n * @func\n * @memberOf R\n * @since v0.6.0\n * @category Function\n * @category Object\n * @sig (* -> *) -> {*} -> (* -> *)\n * @param {Function} fn The function to bind to context\n * @param {Object} thisObj The context to bind `fn` to\n * @return {Function} A function that will execute in the context of `thisObj`.\n * @see R.partial\n * @example\n *\n *      const log = R.bind(console.log, console);\n *      R.pipe(R.assoc('a', 2), R.tap(log), R.assoc('a', 3))({a: 1}); //=> {a: 3}\n *      // logs {a: 2}\n * @symb R.bind(f, o)(a, b) = f.call(o, a, b)\n */\n\nvar bind =\n/*#__PURE__*/\n_curry2(function bind(fn, thisObj) {\n  return _arity(fn.length, function () {\n    return fn.apply(thisObj, arguments);\n  });\n});\n\nexport default bind;", "import _isArrayLike from \"./_isArrayLike.js\";\nimport _xwrap from \"./_xwrap.js\";\nimport bind from \"../bind.js\";\n\nfunction _arrayReduce(xf, acc, list) {\n  var idx = 0;\n  var len = list.length;\n\n  while (idx < len) {\n    acc = xf['@@transducer/step'](acc, list[idx]);\n\n    if (acc && acc['@@transducer/reduced']) {\n      acc = acc['@@transducer/value'];\n      break;\n    }\n\n    idx += 1;\n  }\n\n  return xf['@@transducer/result'](acc);\n}\n\nfunction _iterableReduce(xf, acc, iter) {\n  var step = iter.next();\n\n  while (!step.done) {\n    acc = xf['@@transducer/step'](acc, step.value);\n\n    if (acc && acc['@@transducer/reduced']) {\n      acc = acc['@@transducer/value'];\n      break;\n    }\n\n    step = iter.next();\n  }\n\n  return xf['@@transducer/result'](acc);\n}\n\nfunction _methodReduce(xf, acc, obj, methodName) {\n  return xf['@@transducer/result'](obj[methodName](bind(xf['@@transducer/step'], xf), acc));\n}\n\nvar symIterator = typeof Symbol !== 'undefined' ? Symbol.iterator : '@@iterator';\nexport default function _reduce(fn, acc, list) {\n  if (typeof fn === 'function') {\n    fn = _xwrap(fn);\n  }\n\n  if (_isArrayLike(list)) {\n    return _arrayReduce(fn, acc, list);\n  }\n\n  if (typeof list['fantasy-land/reduce'] === 'function') {\n    return _methodReduce(fn, acc, list, 'fantasy-land/reduce');\n  }\n\n  if (list[symIterator] != null) {\n    return _iterableReduce(fn, acc, list[symIterator]());\n  }\n\n  if (typeof list.next === 'function') {\n    return _iterableReduce(fn, acc, list);\n  }\n\n  if (typeof list.reduce === 'function') {\n    return _methodReduce(fn, acc, list, 'reduce');\n  }\n\n  throw new TypeError('reduce: list must be array or iterable');\n}", "import _curry2 from \"./_curry2.js\";\nimport _xfBase from \"./_xfBase.js\";\n\nvar XMap =\n/*#__PURE__*/\nfunction () {\n  function XMap(f, xf) {\n    this.xf = xf;\n    this.f = f;\n  }\n\n  XMap.prototype['@@transducer/init'] = _xfBase.init;\n  XMap.prototype['@@transducer/result'] = _xfBase.result;\n\n  XMap.prototype['@@transducer/step'] = function (result, input) {\n    return this.xf['@@transducer/step'](result, this.f(input));\n  };\n\n  return XMap;\n}();\n\nvar _xmap =\n/*#__PURE__*/\n_curry2(function _xmap(f, xf) {\n  return new XMap(f, xf);\n});\n\nexport default _xmap;", "export default function _has(prop, obj) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}", "import _has from \"./_has.js\";\nvar toString = Object.prototype.toString;\n\nvar _isArguments =\n/*#__PURE__*/\nfunction () {\n  return toString.call(arguments) === '[object Arguments]' ? function _isArguments(x) {\n    return toString.call(x) === '[object Arguments]';\n  } : function _isArguments(x) {\n    return _has('callee', x);\n  };\n}();\n\nexport default _isArguments;", "import _curry1 from \"./internal/_curry1.js\";\nimport _has from \"./internal/_has.js\";\nimport _isArguments from \"./internal/_isArguments.js\"; // cover IE < 9 keys issues\n\nvar hasEnumBug = !\n/*#__PURE__*/\n{\n  toString: null\n}.propertyIsEnumerable('toString');\nvar nonEnumerableProps = ['constructor', 'valueOf', 'isPrototypeOf', 'toString', 'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString']; // Safari bug\n\nvar hasArgsEnumBug =\n/*#__PURE__*/\nfunction () {\n  'use strict';\n\n  return arguments.propertyIsEnumerable('length');\n}();\n\nvar contains = function contains(list, item) {\n  var idx = 0;\n\n  while (idx < list.length) {\n    if (list[idx] === item) {\n      return true;\n    }\n\n    idx += 1;\n  }\n\n  return false;\n};\n/**\n * Returns a list containing the names of all the enumerable own properties of\n * the supplied object.\n * Note that the order of the output array is not guaranteed to be consistent\n * across different JS platforms.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Object\n * @sig {k: v} -> [k]\n * @param {Object} obj The object to extract properties from\n * @return {Array} An array of the object's own properties.\n * @see R.keysIn, R.values, R.toPairs\n * @example\n *\n *      R.keys({a: 1, b: 2, c: 3}); //=> ['a', 'b', 'c']\n */\n\n\nvar keys = typeof Object.keys === 'function' && !hasArgsEnumBug ?\n/*#__PURE__*/\n_curry1(function keys(obj) {\n  return Object(obj) !== obj ? [] : Object.keys(obj);\n}) :\n/*#__PURE__*/\n_curry1(function keys(obj) {\n  if (Object(obj) !== obj) {\n    return [];\n  }\n\n  var prop, nIdx;\n  var ks = [];\n\n  var checkArgsLength = hasArgsEnumBug && _isArguments(obj);\n\n  for (prop in obj) {\n    if (_has(prop, obj) && (!checkArgsLength || prop !== 'length')) {\n      ks[ks.length] = prop;\n    }\n  }\n\n  if (hasEnumBug) {\n    nIdx = nonEnumerableProps.length - 1;\n\n    while (nIdx >= 0) {\n      prop = nonEnumerableProps[nIdx];\n\n      if (_has(prop, obj) && !contains(ks, prop)) {\n        ks[ks.length] = prop;\n      }\n\n      nIdx -= 1;\n    }\n  }\n\n  return ks;\n});\nexport default keys;", "import _curry2 from \"./internal/_curry2.js\";\nimport _dispatchable from \"./internal/_dispatchable.js\";\nimport _map from \"./internal/_map.js\";\nimport _reduce from \"./internal/_reduce.js\";\nimport _xmap from \"./internal/_xmap.js\";\nimport curryN from \"./curryN.js\";\nimport keys from \"./keys.js\";\n/**\n * Takes a function and\n * a [functor](https://github.com/fantasyland/fantasy-land#functor),\n * applies the function to each of the functor's values, and returns\n * a functor of the same shape.\n *\n * Ramda provides suitable `map` implementations for `Array` and `Object`,\n * so this function may be applied to `[1, 2, 3]` or `{x: 1, y: 2, z: 3}`.\n *\n * Dispatches to the `map` method of the second argument, if present.\n *\n * Acts as a transducer if a transformer is given in list position.\n *\n * Also treats functions as functors and will compose them together.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig Functor f => (a -> b) -> f a -> f b\n * @param {Function} fn The function to be called on every element of the input `list`.\n * @param {Array} list The list to be iterated over.\n * @return {Array} The new list.\n * @see R.transduce, R.addIndex, R.pluck, R.project\n * @example\n *\n *      const double = x => x * 2;\n *\n *      R.map(double, [1, 2, 3]); //=> [2, 4, 6]\n *\n *      R.map(double, {x: 1, y: 2, z: 3}); //=> {x: 2, y: 4, z: 6}\n * @symb R.map(f, [a, b]) = [f(a), f(b)]\n * @symb R.map(f, { x: a, y: b }) = { x: f(a), y: f(b) }\n * @symb R.map(f, functor_o) = functor_o.map(f)\n */\n\nvar map =\n/*#__PURE__*/\n_curry2(\n/*#__PURE__*/\n_dispatchable(['fantasy-land/map', 'map'], _xmap, function map(fn, functor) {\n  switch (Object.prototype.toString.call(functor)) {\n    case '[object Function]':\n      return curryN(functor.length, function () {\n        return fn.call(this, functor.apply(this, arguments));\n      });\n\n    case '[object Object]':\n      return _reduce(function (acc, key) {\n        acc[key] = fn(functor[key]);\n        return acc;\n      }, {}, keys(functor));\n\n    default:\n      return _map(fn, functor);\n  }\n}));\n\nexport default map;", "/**\n * Determine if the passed argument is an integer.\n *\n * @private\n * @param {*} n\n * @category Type\n * @return {Boolean}\n */\nexport default Number.isInteger || function _isInteger(n) {\n  return n << 0 === n;\n};", "import _curry3 from \"./internal/_curry3.js\";\nimport _reduce from \"./internal/_reduce.js\";\n/**\n * Returns a single item by iterating through the list, successively calling\n * the iterator function and passing it an accumulator value and the current\n * value from the array, and then passing the result to the next call.\n *\n * The iterator function receives two values: *(acc, value)*. It may use\n * [`R.reduced`](#reduced) to shortcut the iteration.\n *\n * The arguments' order of [`reduceRight`](#reduceRight)'s iterator function\n * is *(value, acc)*.\n *\n * Note: `R.reduce` does not skip deleted or unassigned indices (sparse\n * arrays), unlike the native `Array.prototype.reduce` method. For more details\n * on this behavior, see:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce#Description\n *\n * Dispatches to the `reduce` method of the third argument, if present. When\n * doing so, it is up to the user to handle the [`R.reduced`](#reduced)\n * shortcuting, as this is not implemented by `reduce`.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig ((a, b) -> a) -> a -> [b] -> a\n * @param {Function} fn The iterator function. Receives two values, the accumulator and the\n *        current element from the array.\n * @param {*} acc The accumulator value.\n * @param {Array} list The list to iterate over.\n * @return {*} The final, accumulated value.\n * @see R.reduced, R.addIndex, R.reduceRight\n * @example\n *\n *      R.reduce(R.subtract, 0, [1, 2, 3, 4]) // => ((((0 - 1) - 2) - 3) - 4) = -10\n *      //          -               -10\n *      //         / \\              / \\\n *      //        -   4           -6   4\n *      //       / \\              / \\\n *      //      -   3   ==>     -3   3\n *      //     / \\              / \\\n *      //    -   2           -1   2\n *      //   / \\              / \\\n *      //  0   1            0   1\n *\n * @symb R.reduce(f, a, [b, c, d]) = f(f(f(a, b), c), d)\n */\n\nvar reduce =\n/*#__PURE__*/\n_curry3(_reduce);\n\nexport default reduce;", "export default function _pipe(f, g) {\n  return function () {\n    return g.call(this, f.apply(this, arguments));\n  };\n}", "import _isArray from \"./_isArray.js\";\n/**\n * This checks whether a function has a [methodname] function. If it isn't an\n * array it will execute that function otherwise it will default to the ramda\n * implementation.\n *\n * @private\n * @param {Function} fn ramda implementation\n * @param {String} methodname property to check for a custom implementation\n * @return {Object} Whatever the return value of the method is.\n */\n\nexport default function _checkForMethod(methodname, fn) {\n  return function () {\n    var length = arguments.length;\n\n    if (length === 0) {\n      return fn();\n    }\n\n    var obj = arguments[length - 1];\n    return _isArray(obj) || typeof obj[methodname] !== 'function' ? fn.apply(this, arguments) : obj[methodname].apply(obj, Array.prototype.slice.call(arguments, 0, length - 1));\n  };\n}", "import _checkForMethod from \"./internal/_checkForMethod.js\";\nimport _curry3 from \"./internal/_curry3.js\";\n/**\n * Returns the elements of the given list or string (or object with a `slice`\n * method) from `fromIndex` (inclusive) to `toIndex` (exclusive).\n *\n * Dispatches to the `slice` method of the third argument, if present.\n *\n * @func\n * @memberOf R\n * @since v0.1.4\n * @category List\n * @sig Number -> Number -> [a] -> [a]\n * @sig Number -> Number -> String -> String\n * @param {Number} fromIndex The start index (inclusive).\n * @param {Number} toIndex The end index (exclusive).\n * @param {*} list\n * @return {*}\n * @example\n *\n *      R.slice(1, 3, ['a', 'b', 'c', 'd']);        //=> ['b', 'c']\n *      R.slice(1, Infinity, ['a', 'b', 'c', 'd']); //=> ['b', 'c', 'd']\n *      R.slice(0, -1, ['a', 'b', 'c', 'd']);       //=> ['a', 'b', 'c']\n *      R.slice(-3, -1, ['a', 'b', 'c', 'd']);      //=> ['b', 'c']\n *      R.slice(0, 3, 'ramda');                     //=> 'ram'\n */\n\nvar slice =\n/*#__PURE__*/\n_curry3(\n/*#__PURE__*/\n_checkForMethod('slice', function slice(fromIndex, toIndex, list) {\n  return Array.prototype.slice.call(list, fromIndex, toIndex);\n}));\n\nexport default slice;", "import _checkForMethod from \"./internal/_checkForMethod.js\";\nimport _curry1 from \"./internal/_curry1.js\";\nimport slice from \"./slice.js\";\n/**\n * Returns all but the first element of the given list or string (or object\n * with a `tail` method).\n *\n * Dispatches to the `slice` method of the first argument, if present.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig [a] -> [a]\n * @sig String -> String\n * @param {*} list\n * @return {*}\n * @see R.head, R.init, R.last\n * @example\n *\n *      R.tail([1, 2, 3]);  //=> [2, 3]\n *      R.tail([1, 2]);     //=> [2]\n *      R.tail([1]);        //=> []\n *      R.tail([]);         //=> []\n *\n *      R.tail('abc');  //=> 'bc'\n *      R.tail('ab');   //=> 'b'\n *      R.tail('a');    //=> ''\n *      R.tail('');     //=> ''\n */\n\nvar tail =\n/*#__PURE__*/\n_curry1(\n/*#__PURE__*/\n_checkForMethod('tail',\n/*#__PURE__*/\nslice(1, Infinity)));\n\nexport default tail;", "import _arity from \"./internal/_arity.js\";\nimport _pipe from \"./internal/_pipe.js\";\nimport reduce from \"./reduce.js\";\nimport tail from \"./tail.js\";\n/**\n * Performs left-to-right function composition. The first argument may have\n * any arity; the remaining arguments must be unary.\n *\n * In some libraries this function is named `sequence`.\n *\n * **Note:** The result of pipe is not automatically curried.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Function\n * @sig (((a, b, ..., n) -> o), (o -> p), ..., (x -> y), (y -> z)) -> ((a, b, ..., n) -> z)\n * @param {...Function} functions\n * @return {Function}\n * @see R.compose\n * @example\n *\n *      const f = R.pipe(Math.pow, R.negate, R.inc);\n *\n *      f(3, 4); // -(3^4) + 1\n * @symb R.pipe(f, g, h)(a, b) = h(g(f(a, b)))\n * @symb R.pipe(f, g, h)(a)(b) = h(g(f(a)))(b)\n */\n\nexport default function pipe() {\n  if (arguments.length === 0) {\n    throw new Error('pipe requires at least one argument');\n  }\n\n  return _arity(arguments[0].length, reduce(_pipe, arguments[0], tail(arguments)));\n}", "/**\n * Polyfill from <https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString>.\n */\nvar pad = function pad(n) {\n  return (n < 10 ? '0' : '') + n;\n};\n\nvar _toISOString = typeof Date.prototype.toISOString === 'function' ? function _toISOString(d) {\n  return d.toISOString();\n} : function _toISOString(d) {\n  return d.getUTCFullYear() + '-' + pad(d.getUTCMonth() + 1) + '-' + pad(d.getUTCDate()) + 'T' + pad(d.getUTCHours()) + ':' + pad(d.getUTCMinutes()) + ':' + pad(d.getUTCSeconds()) + '.' + (d.getUTCMilliseconds() / 1000).toFixed(3).slice(2, 5) + 'Z';\n};\n\nexport default _toISOString;", "export default function _complement(f) {\n  return function () {\n    return !f.apply(this, arguments);\n  };\n}", "export default function _filter(fn, list) {\n  var idx = 0;\n  var len = list.length;\n  var result = [];\n\n  while (idx < len) {\n    if (fn(list[idx])) {\n      result[result.length] = list[idx];\n    }\n\n    idx += 1;\n  }\n\n  return result;\n}", "export default function _isObject(x) {\n  return Object.prototype.toString.call(x) === '[object Object]';\n}", "import _curry2 from \"./_curry2.js\";\nimport _xfBase from \"./_xfBase.js\";\n\nvar XFilter =\n/*#__PURE__*/\nfunction () {\n  function XFilter(f, xf) {\n    this.xf = xf;\n    this.f = f;\n  }\n\n  XFilter.prototype['@@transducer/init'] = _xfBase.init;\n  XFilter.prototype['@@transducer/result'] = _xfBase.result;\n\n  XFilter.prototype['@@transducer/step'] = function (result, input) {\n    return this.f(input) ? this.xf['@@transducer/step'](result, input) : result;\n  };\n\n  return XFilter;\n}();\n\nvar _xfilter =\n/*#__PURE__*/\n_curry2(function _xfilter(f, xf) {\n  return new XFilter(f, xf);\n});\n\nexport default _xfilter;", "import _curry2 from \"./internal/_curry2.js\";\nimport _dispatchable from \"./internal/_dispatchable.js\";\nimport _filter from \"./internal/_filter.js\";\nimport _isObject from \"./internal/_isObject.js\";\nimport _reduce from \"./internal/_reduce.js\";\nimport _xfilter from \"./internal/_xfilter.js\";\nimport keys from \"./keys.js\";\n/**\n * Takes a predicate and a `Filterable`, and returns a new filterable of the\n * same type containing the members of the given filterable which satisfy the\n * given predicate. Filterable objects include plain objects or any object\n * that has a filter method such as `Array`.\n *\n * Dispatches to the `filter` method of the second argument, if present.\n *\n * Acts as a transducer if a transformer is given in list position.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig Filterable f => (a -> Boolean) -> f a -> f a\n * @param {Function} pred\n * @param {Array} filterable\n * @return {Array} Filterable\n * @see R.reject, R.transduce, R.addIndex\n * @example\n *\n *      const isEven = n => n % 2 === 0;\n *\n *      R.filter(isEven, [1, 2, 3, 4]); //=> [2, 4]\n *\n *      R.filter(isEven, {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, d: 4}\n */\n\nvar filter =\n/*#__PURE__*/\n_curry2(\n/*#__PURE__*/\n_dispatchable(['fantasy-land/filter', 'filter'], _xfilter, function (pred, filterable) {\n  return _isObject(filterable) ? _reduce(function (acc, key) {\n    if (pred(filterable[key])) {\n      acc[key] = filterable[key];\n    }\n\n    return acc;\n  }, {}, keys(filterable)) : // else\n  _filter(pred, filterable);\n}));\n\nexport default filter;", "import _complement from \"./internal/_complement.js\";\nimport _curry2 from \"./internal/_curry2.js\";\nimport filter from \"./filter.js\";\n/**\n * The complement of [`filter`](#filter).\n *\n * Acts as a transducer if a transformer is given in list position. Filterable\n * objects include plain objects or any object that has a filter method such\n * as `Array`.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig Filterable f => (a -> Boolean) -> f a -> f a\n * @param {Function} pred\n * @param {Array} filterable\n * @return {Array}\n * @see R.filter, R.transduce, R.addIndex\n * @example\n *\n *      const isOdd = (n) => n % 2 !== 0;\n *\n *      R.reject(isOdd, [1, 2, 3, 4]); //=> [2, 4]\n *\n *      R.reject(isOdd, {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, d: 4}\n */\n\nvar reject =\n/*#__PURE__*/\n_curry2(function reject(pred, filterable) {\n  return filter(_complement(pred), filterable);\n});\n\nexport default reject;", "import _curry2 from \"./internal/_curry2.js\";\n/**\n * See if an object (i.e. `val`) is an instance of the supplied constructor. This\n * function will check up the inheritance chain, if any.\n * If `val` was created using `Object.create`, `R.is(Object, val) === true`.\n *\n * @func\n * @memberOf R\n * @since v0.3.0\n * @category Type\n * @sig (* -> {*}) -> a -> Boolean\n * @param {Object} ctor A constructor\n * @param {*} val The value to test\n * @return {Boolean}\n * @example\n *\n *      R.is(Object, {}); //=> true\n *      R.is(Number, 1); //=> true\n *      R.is(Object, 1); //=> false\n *      R.is(String, 's'); //=> true\n *      R.is(String, new String('')); //=> true\n *      R.is(Object, new String('')); //=> true\n *      R.is(Object, 's'); //=> false\n *      R.is(Number, {}); //=> false\n */\n\nvar is =\n/*#__PURE__*/\n_curry2(function is(Ctor, val) {\n  return val instanceof Ctor || val != null && (val.constructor === Ctor || Ctor.name === 'Object' && typeof val === 'object');\n});\n\nexport default is;", "import _curry1 from \"./internal/_curry1.js\";\nvar ws = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u2000\\u2001\\u2002\\u2003' + '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028' + '\\u2029\\uFEFF';\nvar zeroWidth = '\\u200b';\nvar hasProtoTrim = typeof String.prototype.trim === 'function';\n/**\n * Removes (strips) whitespace from both ends of the string.\n *\n * @func\n * @memberOf R\n * @since v0.6.0\n * @category String\n * @sig String -> String\n * @param {String} str The string to trim.\n * @return {String} Trimmed version of `str`.\n * @example\n *\n *      R.trim('   xyz  '); //=> 'xyz'\n *      R.map(R.trim, R.split(',', 'x, y, z')); //=> ['x', 'y', 'z']\n */\n\nvar trim = !hasProtoTrim ||\n/*#__PURE__*/\nws.trim() || !\n/*#__PURE__*/\nzeroWidth.trim() ?\n/*#__PURE__*/\n_curry1(function trim(str) {\n  var beginRx = new RegExp('^[' + ws + '][' + ws + ']*');\n  var endRx = new RegExp('[' + ws + '][' + ws + ']*$');\n  return str.replace(beginRx, '').replace(endRx, '');\n}) :\n/*#__PURE__*/\n_curry1(function trim(str) {\n  return str.trim();\n});\nexport default trim;", "import _curry3 from \"./internal/_curry3.js\";\n/**\n * Tests the final argument by passing it to the given predicate function. If\n * the predicate is satisfied, the function will return the result of calling\n * the `whenTrueFn` function with the same argument. If the predicate is not\n * satisfied, the argument is returned as is.\n *\n * @func\n * @memberOf R\n * @since v0.18.0\n * @category Logic\n * @sig (a -> Boolean) -> (a -> b) -> a -> a | b\n * @param {Function} pred       A predicate function\n * @param {Function} whenTrueFn A function to invoke when the `condition`\n *                              evaluates to a truthy value.\n * @param {*}        x          An object to test with the `pred` function and\n *                              pass to `whenTrueFn` if necessary.\n * @return {*} Either `x` or the result of applying `x` to `whenTrueFn`.\n * @see R.ifElse, R.unless, R.cond\n * @example\n *\n *      // truncate :: String -> String\n *      const truncate = R.when(\n *        R.propSatisfies(R.gt(R.__, 10), 'length'),\n *        R.pipe(R.take(10), R.append('\u2026'), R.join(''))\n *      );\n *      truncate('12345');         //=> '12345'\n *      truncate('0123456789ABC'); //=> '0123456789\u2026'\n */\n\nvar when =\n/*#__PURE__*/\n_curry3(function when(pred, whenTrueFn, x) {\n  return pred(x) ? whenTrueFn(x) : x;\n});\n\nexport default when;", "/** Number theory-friendly modulo implementation\n\n    If divisor is positive, return value will be too.\n*/\nNumber.prototype.mod = function (this: number, n: number): number {\n    return knuth_mod(this, n)\n}\n\n/** Takes sign of divisor -- incl. returning -0 */\nexport function knuth_mod(dividend: number, divisor: number) {\n    return dividend - divisor * Math.floor(dividend / divisor)\n}\n\n/** Equivalent to knuth_mod but doesn't return -0 */\nexport function my_mod(dividend: number, divisor: number) {\n    return ((dividend % divisor) + divisor) % divisor\n}\n\n/** Always gives a positive result.\n\n    Equivalent to knuth_mod when divisor is +ve\n    Equivalent to % when dividend is +ve\n*/\nexport function euclid_mod(dividend: number, divisor: number) {\n    const abs_divisor = Math.abs(divisor)\n    const quotient = Math.floor(dividend / abs_divisor)\n    return dividend - abs_divisor * quotient\n}\n\nexport {}\n", "import * as nearley from \"nearley\"\n\n/** Friendlier interface around nearley parsers */\nexport class Parser {\n    private parser\n    private initial_state\n    /* public results */\n\n    constructor(grammar) {\n        this.parser = new nearley.Parser(nearley.Grammar.fromCompiled(grammar))\n        this.initial_state = this.parser.save()\n        /* this.results = this.parser.results */\n    }\n\n    feedUntilError(input) {\n        let lastResult\n        let consumedIndex = 0\n        try {\n            for (const val of input) {\n                this.parser.feed(val)\n                lastResult = this.parser.results[0]\n                consumedIndex++\n            }\n        } finally {\n            this.reset()\n            if (lastResult === undefined) {\n                throw new Error(\"Error: no result!\")\n            } else {\n                return [lastResult, input.slice(consumedIndex)]\n            }\n        }\n    }\n\n    private reset() {\n        this.parser.restore(this.initial_state)\n    }\n\n    /* feed(input) { */\n    /*     return this.parser.feed(input) */\n    /* } */\n}\n", "// Generated automatically by nearley, version 2.20.1\n// http://github.com/Hardmath123/nearley\n// Bypasses TS6133. Allow declared but unused functions.\n// @ts-ignore\nfunction id(d: any[]): any { return d[0]; }\n\ninterface NearleyToken {\n  value: any;\n  [key: string]: any;\n};\n\ninterface NearleyLexer {\n  reset: (chunk: string, info: any) => void;\n  next: () => NearleyToken | undefined;\n  save: () => any;\n  formatError: (token: never) => string;\n  has: (tokenType: string) => boolean;\n};\n\ninterface NearleyRule {\n  name: string;\n  symbols: NearleySymbol[];\n  postprocess?: (d: any[], loc?: number, reject?: {}) => any;\n};\n\ntype NearleySymbol = string | { literal: any } | { test: (token: any) => boolean };\n\ninterface Grammar {\n  Lexer: NearleyLexer | undefined;\n  ParserRules: NearleyRule[];\n  ParserStart: string;\n};\n\nconst grammar: Grammar = {\n  Lexer: undefined,\n  ParserRules: [\n    {\"name\": \"BracketExpr\", \"symbols\": [{\"literal\":\"<\"}, \"Modifier\", \"ModKey\", {\"literal\":\">\"}], \"postprocess\": bexpr=>bexpr.slice(1,-1)},\n    {\"name\": \"BracketExpr\", \"symbols\": [{\"literal\":\"<\"}, \"Key\", {\"literal\":\">\"}], \"postprocess\": bexpr=>[{}].concat(bexpr.slice(1,-1))},\n    {\"name\": \"Modifier$ebnf$1\", \"symbols\": [/[acmsACMS]/], \"postprocess\": id},\n    {\"name\": \"Modifier$ebnf$1\", \"symbols\": [], \"postprocess\": () => null},\n    {\"name\": \"Modifier$ebnf$2\", \"symbols\": [/[acmsACMS]/], \"postprocess\": id},\n    {\"name\": \"Modifier$ebnf$2\", \"symbols\": [], \"postprocess\": () => null},\n    {\"name\": \"Modifier$ebnf$3\", \"symbols\": [/[acmsACMS]/], \"postprocess\": id},\n    {\"name\": \"Modifier$ebnf$3\", \"symbols\": [], \"postprocess\": () => null},\n    {\"name\": \"Modifier$ebnf$4\", \"symbols\": [/[acmsACMS]/], \"postprocess\": id},\n    {\"name\": \"Modifier$ebnf$4\", \"symbols\": [], \"postprocess\": () => null},\n    {\"name\": \"Modifier\", \"symbols\": [\"Modifier$ebnf$1\", \"Modifier$ebnf$2\", \"Modifier$ebnf$3\", \"Modifier$ebnf$4\", {\"literal\":\"-\"}], \"postprocess\": \n        /** For each modifier present,\n            add its long name as an attribute set to true to an object */\n        (mods, _, reject) => {\n            const longNames = new Map([\n                [\"A\", \"altKey\"],\n                [\"C\", \"ctrlKey\"],\n                [\"M\", \"metaKey\"],\n                [\"S\", \"shiftKey\"],\n            ])\n        \n            let modifiersObj = {}\n            for (let mod of mods) {\n                if (mod === null || mod === \"-\") continue\n                let longName = longNames.get(mod.toUpperCase())\n                if (longName) {\n                    // Reject if the same name is used twice.\n                    if (longName in modifiersObj) return reject\n                    else modifiersObj[longName] = true\n                }\n            }\n            return modifiersObj\n        }\n        },\n    {\"name\": \"ModKey\", \"symbols\": [{\"literal\":\"<\"}], \"postprocess\": id},\n    {\"name\": \"ModKey\", \"symbols\": [{\"literal\":\">\"}], \"postprocess\": id},\n    {\"name\": \"ModKey\", \"symbols\": [{\"literal\":\"-\"}], \"postprocess\": id},\n    {\"name\": \"ModKey\", \"symbols\": [\"Key\"], \"postprocess\": id},\n    {\"name\": \"Key$ebnf$1\", \"symbols\": [/[^\\s<>-]/]},\n    {\"name\": \"Key$ebnf$1\", \"symbols\": [\"Key$ebnf$1\", /[^\\s<>-]/], \"postprocess\": (d) => d[0].concat([d[1]])},\n    {\"name\": \"Key\", \"symbols\": [\"Key$ebnf$1\"], \"postprocess\": (key)=>key[0].join(\"\")}\n  ],\n  ParserStart: \"BracketExpr\",\n};\n\nexport default grammar;\n", "/** Key-sequence parser\n\n    If `map` is a Map of `MinimalKey[]` to objects (exstrs or callbacks)\n    and `keyseq` is an array of [[MinimalKey]] compatible objects...\n\n     - `parse(keyseq, map)` returns the mapped object and a count OR a prefix\n       of `MinimalKey[]` (possibly empty) that, if more keys are pressed, could\n       map to an object.\n     - `completions(keyseq, map)` returns the fragment of `map` that keyseq is\n       a valid prefix of.\n     - `mapstrToKeySeq` generates KeySequences for the rest of the API.\n\n    No key sequence in a `map` may be a prefix of another key sequence in that\n    map. This is a point of difference from Vim that removes any time-dependence\n    in the parser. Vimperator, Pentadactyl, saka-key, etc, all share this\n    limitation.\n\n    If a key is represented by a single character then the shift modifier state\n    is ignored unless other modifiers are also present.\n\n*/\n\n/** */\nimport { filter, find, izip } from \"@src/lib/itertools\"\nimport { Parser } from \"@src/lib/nearley_utils\"\nimport * as config from \"@src/lib/config\"\nimport * as R from \"ramda\"\nimport grammar from \"@src/grammars/.bracketexpr.generated\"\nconst bracketexpr_grammar = grammar\nconst bracketexpr_parser = new Parser(bracketexpr_grammar)\n\nlet KEYCODETRANSLATEMAP = {}\n\n// {{{ General types\n\nexport interface KeyModifiers {\n    altKey?: boolean\n    ctrlKey?: boolean\n    metaKey?: boolean\n    shiftKey?: boolean\n}\n\n// Format modifiers\nconst modifiers = new Map([\n    [\"A\", \"altKey\"],\n    [\"C\", \"ctrlKey\"],\n    [\"M\", \"metaKey\"],\n    [\"S\", \"shiftKey\"],\n])\nexport class MinimalKey {\n    readonly altKey = false\n    readonly ctrlKey = false\n    readonly metaKey = false\n    readonly shiftKey = false\n    translated = false\n    constructor(readonly key: string, modifiers?: KeyModifiers) {\n        if (modifiers !== undefined) {\n            for (const mod of Object.keys(modifiers)) {\n                if (\n                    this.key.length === 1 &&\n                    this.key !== \" \" &&\n                    mod === \"shiftKey\"\n                )\n                    continue\n                this[mod] = modifiers[mod]\n            }\n        }\n    }\n\n    /** Does this key match another MinimalKey */\n    public match(keyevent: MinimalKey) {\n        if (this.key !== keyevent.key) return false\n        for (const [_, attr] of modifiers.entries()) {\n            if (this[attr] !== keyevent[attr]) return false\n        }\n        return true\n    }\n\n    public translate(keytranslatemap: { [inkey: string]: string }): MinimalKey {\n        let newkey = keytranslatemap[this.key]\n        if (newkey === undefined || this.translated) newkey = this.key\n        const result = new MinimalKey(newkey, {\n            altKey: this.altKey,\n            ctrlKey: this.ctrlKey,\n            metaKey: this.metaKey,\n            shiftKey: this.shiftKey,\n        })\n        result.translated = true\n        return result\n    }\n\n    public toMapstr() {\n        let str = \"\"\n        let needsBrackets = this.key.length > 1\n\n        for (const [letter, attr] of modifiers.entries()) {\n            if (this[attr]) {\n                str += letter\n                needsBrackets = true\n            }\n        }\n        if (str) {\n            str += \"-\"\n        }\n\n        let key = this.key\n        if (key === \" \") {\n            key = \"Space\"\n            needsBrackets = true\n        }\n\n        // Format the rest\n        str += key\n        if (needsBrackets) {\n            str = \"<\" + str + \">\"\n        }\n\n        return str\n    }\n    public isPrintable() {\n        return this.key.length === 1\n    }\n}\n\nexport type KeyEventLike = MinimalKey | KeyboardEvent\n\n// }}}\n\n// {{{ parser and completions\n\ntype MapTarget = string | ((...args: any[]) => any)\ntype KeyMap = Map<MinimalKey[], MapTarget>\n\nexport interface ParserResponse {\n    keys?: MinimalKey[]\n    value?: string\n    exstr?: string\n    isMatch?: boolean\n    numericPrefix?: number\n}\n\nfunction splitNumericPrefix(\n    keyseq: MinimalKey[],\n): [MinimalKey[], MinimalKey[]] {\n    // If the first key is in 1:9, partition all numbers until you reach a non-number.\n    if (\n        !hasModifiers(keyseq[0]) &&\n        [1, 2, 3, 4, 5, 6, 7, 8, 9].includes(Number(keyseq[0].key))\n    ) {\n        const prefix = [keyseq[0]]\n        for (const ke of keyseq.slice(1)) {\n            if (\n                !hasModifiers(ke) &&\n                [0, 1, 2, 3, 4, 5, 6, 7, 8, 9].includes(Number(ke.key))\n            )\n                prefix.push(ke)\n            else break\n        }\n        const rest = keyseq.slice(prefix.length)\n        return [prefix, rest]\n    } else {\n        return [[], keyseq]\n    }\n}\n\nexport function stripOnlyModifiers(keyseq) {\n    return keyseq.filter(\n        key =>\n            ![\"Control\", \"Shift\", \"Alt\", \"AltGraph\", \"Meta\"].includes(key.key),\n    )\n}\n\nexport function parse(keyseq: MinimalKey[], map: KeyMap): ParserResponse {\n    // Remove bare modifiers\n    keyseq = stripOnlyModifiers(keyseq)\n\n    // If the keyseq is now empty, abort.\n    if (keyseq.length === 0) return { keys: [], isMatch: false }\n\n    // Split into numeric prefix and non-numeric suffix\n    let numericPrefix: MinimalKey[]\n    ;[numericPrefix, keyseq] = splitNumericPrefix(keyseq)\n\n    // If keyseq is a prefix of a key in map, proceed, else try dropping keys\n    // from keyseq until it is empty or is a prefix.\n    let possibleMappings = completions(keyseq, map)\n    while (possibleMappings.size === 0 && keyseq.length > 0) {\n        keyseq.shift()\n        numericPrefix = []\n        possibleMappings = completions(keyseq, map)\n    }\n\n    if (possibleMappings.size > 0) {\n        // Check if any of the mappings is a perfect match (this will only\n        // happen if some sequences in the KeyMap are prefixes of other seqs).\n        try {\n            const perfect = find(\n                possibleMappings,\n                ([k, _v]) => k.length === keyseq.length,\n            )\n            return {\n                value: perfect[1],\n                exstr: perfect[1] + numericPrefixToExstrSuffix(numericPrefix),\n                isMatch: true,\n                numericPrefix: numericPrefix.length\n                    ? Number(numericPrefix.map(ke => ke.key).join(\"\"))\n                    : undefined,\n                keys: [],\n            }\n        } catch (e) {\n            if (!(e instanceof RangeError)) throw e\n        }\n    }\n\n    // keyseq is the longest suffix of keyseq that is the prefix of a\n    // command, numericPrefix is a numeric prefix of that. We want to\n    // preserve that whole thing, so concat them back together before\n    // returning.\n    return { keys: numericPrefix.concat(keyseq), isMatch: keyseq.length > 0 }\n}\n\n/** True if seq1 is a prefix or equal to seq2 */\nfunction prefixes(seq1: MinimalKey[], seq2: MinimalKey[]) {\n    if (seq1.length > seq2.length) {\n        return false\n    } else {\n        for (const [key1, key2] of izip(seq1, seq2)) {\n            if (!key2.match(key1)) return false\n        }\n        return true\n    }\n}\n\n/** returns the fragment of `map` that keyseq is a valid prefix of. */\nexport function completions(keyseq: MinimalKey[], map: KeyMap): KeyMap {\n    return new Map(\n        filter(map.entries(), ([ks, _maptarget]) => prefixes(keyseq, ks)),\n    )\n}\n\n// }}}\n\n// {{{ mapStrToKeySeq stuff\n\n/** Expand special key aliases that Vim provides to canonical values\n\n    Vim aliases are case insensitive.\n*/\nfunction expandAliases(key: string) {\n    // Vim compatibility aliases\n    const aliases = {\n        cr: \"Enter\",\n        esc: \"Escape\",\n        return: \"Enter\",\n        enter: \"Enter\",\n        space: \" \",\n        bar: \"|\",\n        del: \"Delete\",\n        bs: \"Backspace\",\n        lt: \"<\",\n    }\n    if (key.toLowerCase() in aliases) return aliases[key.toLowerCase()]\n    else return key\n}\n\n/** String starting with a `<` to MinimalKey and remainder.\n\n    Bracket expressions generally start with a `<` contain no angle brackets or\n    whitespace and end with a `>.` These special-cased expressions are also\n    permitted: `<{modifier}<>`, `<{modifier}>>`, and `<{modifier}->`.\n\n    If the string passed does not match this definition, it is treated as a\n    literal `<.`\n\n    Backus Naur approximation:\n\n    ```\n        - bracketexpr ::= '<' modifier? key '>'\n        - modifier ::= 'm'|'s'|'a'|'c' '-'\n        - key ::= '<'|'>'|/[^\\s<>-]+/\n    ```\n\n    See `src/grammars/bracketExpr.ne` for the canonical definition.\n\n    Modifiers are case insensitive.\n\n    Some case insensitive vim compatibility aliases are also defined, see\n    [[expandAliases]].\n\n    Compatibility breaks:\n\n    Shift + key must use the correct capitalisation of key:\n        `<S-j> != J, <S-J> == J`.\n\n    In Vim `<A-x> == <M-x>` on most systems. Not so here: we can't detect\n    platform, so just have to use what the browser gives us.\n\n    Vim has a predefined list of special key sequences, we don't: there are too\n    many (and they're non-standard) [1].\n\n    In the future, we may just use the names as defined in keyNameList.h [2].\n\n    In Vim, you're still allowed to use `<lt>` within angled brackets:\n        `<M-<> == <M-lt> == <M-<lt>>`\n    Here only the first two will work.\n\n    Restrictions:\n\n    It is not possible to map to a keyevent that actually sends the key value\n    of any of the aliases or to any multi-character sequence containing a space\n    or `>.` It is unlikely that browsers will ever do either of those things.\n\n    [1]: https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values\n    [2]: https://searchfox.org/mozilla-central/source/dom/events/KeyNameList.h\n\n*/\nexport function bracketexprToKey(inputStr) {\n    if (inputStr.indexOf(\">\") > 0) {\n        try {\n            const [[modifiers, key], remainder] =\n                bracketexpr_parser.feedUntilError(inputStr)\n            return [new MinimalKey(expandAliases(key), modifiers), remainder]\n        } catch (e) {\n            // No valid bracketExpr\n            return [new MinimalKey(\"<\"), inputStr.slice(1)]\n        }\n    } else {\n        // No end bracket to match == no valid bracketExpr\n        return [new MinimalKey(\"<\"), inputStr.slice(1)]\n    }\n}\n\n/** Generate KeySequences for the rest of the API.\n\n    A map expression is something like:\n\n    ```\n    j scrollline 10\n    <C-f> scrollpage 0.5\n    <C-d> scrollpage 0.5\n    <C-/><C-n> mode normal\n    ```\n\n    A mapstr is the bit before the space.\n\n    mapstrToKeyseq turns a mapstr into a keySequence that looks like this:\n\n    ```\n    [MinimalKey {key: 'j'}]\n    [MinimalKey {key: 'f', ctrlKey: true}]\n    [MinimalKey {key: 'd', ctrlKey: true}]\n    [MinimalKey {key: '/', ctrlKey: true}, MinimalKey {key: 'n', ctrlKey: true}]\n    ```\n\n    (All four {modifier}Key flags are actually provided on all MinimalKeys)\n*/\nexport function mapstrToKeyseq(mapstr: string): MinimalKey[] {\n    const keyseq: MinimalKey[] = []\n    let key: MinimalKey\n    // Reduce mapstr by one character or one bracket expression per iteration\n    while (mapstr.length) {\n        if (mapstr[0] === \"<\") {\n            ;[key, mapstr] = bracketexprToKey(mapstr)\n            keyseq.push(key)\n        } else {\n            keyseq.push(new MinimalKey(mapstr[0]))\n            mapstr = mapstr.slice(1)\n        }\n    }\n    return keyseq\n}\n\nexport function canonicaliseMapstr(mapstr: string): string {\n    return mapstrToKeyseq(mapstr)\n        .map(k => k.toMapstr())\n        .join(\"\")\n}\n\nexport const commandKey2jsKey = {\n    Comma: \",\",\n    Period: \".\",\n    Up: \"ArrowUp\",\n    Down: \"ArrowDown\",\n    Left: \"ArrowLeft\",\n    Right: \"ArrowRight\",\n    Space: \" \",\n}\n\n/*\n * Convert a Commands API shortcut string to a MinimalKey. NB: no error checking done, media keys probably unsupported.\n */\nexport function mozMapToMinimalKey(mozmap: string): MinimalKey {\n    const arr = mozmap.split(\"+\")\n    const modifiers = {\n        altKey: arr.includes(\"Alt\"),\n        ctrlKey: arr.includes(\"MacCtrl\"), // MacCtrl gives us _actual_ ctrl on all platforms rather than splat on Mac and Ctrl everywhere else\n        shiftKey: arr.includes(\"Shift\"),\n        metaKey: arr.includes(\"Command\"),\n    }\n    let key = arr[arr.length - 1]\n    key = R.propOr(key.toLowerCase(), key, commandKey2jsKey)\n    // TODO: support mediakeys: https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands#Media_keys\n\n    return new MinimalKey(key, modifiers)\n}\n\n/*\n * Convert a minimal key to a Commands API compatible bind. NB: no error checking done.\n *\n * Ctrl-key behaviour on Mac may be surprising.\n */\nexport function minimalKeyToMozMap(key: MinimalKey): string {\n    const mozMap: string[] = []\n    key.altKey && mozMap.push(\"Alt\")\n    key.ctrlKey && mozMap.push(\"MacCtrl\")\n    key.shiftKey && mozMap.push(\"Shift\")\n    key.metaKey && mozMap.push(\"Command\")\n    const jsKey2commandKey = Object.fromEntries(\n        Object.entries(commandKey2jsKey).map(([key, value]) => [value, key]),\n    )\n    mozMap.push(R.propOr(key.key.toUpperCase(), key.key, jsKey2commandKey))\n    return mozMap.join(\"+\")\n}\n\n/** Convert a map of mapstrs (e.g. from config) to a KeyMap */\nexport function mapstrMapToKeyMap(mapstrMap: Map<string, MapTarget>): KeyMap {\n    const newKeyMap = new Map()\n    for (const [mapstr, target] of mapstrMap.entries()) {\n        newKeyMap.set(mapstrToKeyseq(mapstr), target)\n    }\n    return newKeyMap\n}\n\nlet KEYMAP_CACHE = {}\n\n/**\n * Return a \"*maps\" config converted into sequences of minimalkeys (e.g. \"nmaps\")\n */\nexport function keyMap(conf): KeyMap {\n    if (KEYMAP_CACHE[conf]) return KEYMAP_CACHE[conf]\n\n    // Fail silently and pass keys through to page if Tridactyl hasn't loaded yet\n    if (!config.INITIALISED) return new Map()\n\n    const mapobj: { [keyseq: string]: string } = config.get(conf)\n    if (mapobj === undefined)\n        throw new Error(\n            \"No binds defined for this mode. Reload page with <C-r> and add binds, e.g. :bind --mode=[mode] <Esc> mode normal\",\n        )\n\n    // Convert to KeyMap\n    const maps = new Map(Object.entries(mapobj))\n    KEYMAP_CACHE[conf] = mapstrMapToKeyMap(maps)\n    return KEYMAP_CACHE[conf]\n}\n\n// }}}\n\n// {{{ Utility functions for dealing with KeyboardEvents\n\nexport function hasModifiers(keyEvent: MinimalKey) {\n    return (\n        keyEvent.ctrlKey ||\n        keyEvent.altKey ||\n        keyEvent.metaKey ||\n        keyEvent.shiftKey\n    )\n}\n\n/** shiftKey is true for any capital letter, most numbers, etc. Generally care about other modifiers. */\nexport function hasNonShiftModifiers(keyEvent: MinimalKey) {\n    return keyEvent.ctrlKey || keyEvent.altKey || keyEvent.metaKey\n}\n\nfunction numericPrefixToExstrSuffix(numericPrefix: MinimalKey[]) {\n    if (numericPrefix.length > 0) {\n        return \" \" + numericPrefix.map(k => k.key).join(\"\")\n    } else {\n        return \"\"\n    }\n}\n\n/**\n * Convert keyboardEvent to internal type MinimalKey\n * for further use. Key is obtained through layout-independent\n * code if config says so.\n */\nexport function minimalKeyFromKeyboardEvent(\n    keyEvent: KeyboardEvent,\n): MinimalKey {\n    const modifiers = {\n        altKey: keyEvent.altKey,\n        ctrlKey: keyEvent.ctrlKey,\n        metaKey: keyEvent.metaKey,\n        shiftKey: keyEvent.shiftKey,\n    }\n    if (config.get(\"keyboardlayoutforce\") === \"true\") {\n        Object.keys(KEYCODETRANSLATEMAP).length === 0 && updateBaseLayout()\n        let newkey = keyEvent.key\n        const translation = KEYCODETRANSLATEMAP[keyEvent.code]\n        if (translation) newkey = translation[+keyEvent.shiftKey]\n        return new MinimalKey(newkey, modifiers)\n    }\n\n    const result = new MinimalKey(keyEvent.key, modifiers)\n    if (config.get(\"usekeytranslatemap\") === \"true\") {\n        const translationmap = config.get(\"keytranslatemap\")\n        return result.translate(translationmap)\n    }\n    return result\n}\n\n// }}}\n\nbrowser.storage.onChanged.addListener(changes => {\n    if (\"userconfig\" in changes) {\n        KEYMAP_CACHE = {}\n    }\n})\n\n// ideally this would get called via a config.addChangeListener but they are not fired for mysterious reasons\nfunction updateBaseLayout() {\n    KEYCODETRANSLATEMAP = R.mergeRight(\n        config.keyboardlayouts[config.get(\"keyboardlayoutbase\")],\n        config.get(\"keyboardlayoutoverrides\"),\n    )\n}\n", "/** # Binding Functions\n *\n */\n\nimport { canonicaliseMapstr } from \"@src/lib/keyseq\"\n\nexport const mode2maps = new Map([\n    [\"normal\", \"nmaps\"],\n    [\"ignore\", \"ignoremaps\"],\n    [\"insert\", \"imaps\"],\n    [\"input\", \"inputmaps\"],\n    [\"ex\", \"exmaps\"],\n    [\"hint\", \"hintmaps\"],\n    [\"visual\", \"vmaps\"],\n    [\"browser\", \"browsermaps\"],\n])\n\nexport const maps2mode = new Map(\n    Array.from(mode2maps.keys()).map(k => [mode2maps.get(k), k]),\n)\n\nexport const modes = Array.from(mode2maps.keys())\nexport const modeMaps = Array.from(maps2mode.keys())\n\ninterface bind_args {\n    mode: string\n    configName: string\n    key: string\n    excmd: string\n}\n\nexport function parse_bind_args(...args: string[]): bind_args {\n    if (args.length === 0) throw new Error(\"Invalid bind/unbind arguments.\")\n\n    const result = {} as bind_args\n    result.mode = \"normal\"\n\n    if (args[0].startsWith(\"--mode=\")) {\n        result.mode = args.shift().replace(\"--mode=\", \"\")\n    }\n    if (!mode2maps.has(result.mode)) {\n        result.configName = result.mode + \"maps\"\n    } else {\n        result.configName = mode2maps.get(result.mode)\n    }\n\n    const key = args.shift()\n    // Convert key to internal representation\n    result.key = canonicaliseMapstr(key)\n\n    result.excmd = args.join(\" \")\n\n    return result\n}\n", "import * as R from \"ramda\"\n\n// Synchronous version of runtime.getPlatformInfo()\n// Not as exhaustive as the real thing\n// Will return undefined if it can't work it out\nexport function getPlatformOs(): browser.runtime.PlatformOs {\n    const platform = navigator.platform\n    const mapping = {\n        win: \"Win\",\n        openbsd: \"BSD\",\n        mac: \"Mac\",\n        linux: \"Linux\",\n    }\n    return R.keys(\n        R.filter(x => platform.includes(x), mapping),\n    )[0] as keyof typeof mapping\n}\n", "// Sketch\n//\n// Need an easy way of getting and setting settings\n// If a setting is not set, the default should probably be returned.\n// That probably means that binds etc. should be per-key?\n//\n// We should probably store all settings in memory, and only load from storage on startup and when we set it\n//\n// Really, we'd like a way of just letting things use the variables\n//\n\n/** # Tridactyl Configuration\n *\n * We very strongly recommend that you pretty much ignore this page and instead follow the link below DEFAULTS that will take you to our own source code which is formatted in a marginally more sane fashion.\n *\n * Intrepid Tridactyl users: this page is how Tridactyl arranges and manages its settings internally. To view your own settings, use `:viewconfig` and `:viewconfig --user`. To understand how to set settings, see `:help set`.\n *\n */\nimport * as R from \"ramda\"\nimport * as binding from \"@src/lib/binding\"\nimport * as platform from \"@src/lib/platform\"\nimport { DeepPartial } from \"tsdef\"\n\n/* Remove all nulls from objects recursively\n * NB: also applies to arrays\n */\nconst removeNull = R.when(\n    R.is(Object),\n    R.pipe(\n        // Ramda gives an error here without the any\n        R.reject(val => val === null) as any,\n        R.map(a => removeNull(a)),\n    ),\n)\n\n/** @hidden */\nconst CONFIGNAME = \"userconfig\"\n/** @hidden */\nconst WAITERS = []\n/** @hidden */\nexport let INITIALISED = false\n\n/** @hidden */\n// make a naked object\nexport function o(object) {\n    return Object.assign(Object.create(null), object)\n}\n\n/** @hidden */\n// \"Import\" is a reserved word so this will have to do\nfunction schlepp(settings) {\n    Object.assign(USERCONFIG, settings)\n}\n\n/** @hidden */\nexport let USERCONFIG = o({})\n\n/** @hidden\n * Ideally, LoggingLevel should be in logging.ts and imported from there. However this would cause a circular dependency, which webpack can't deal with\n */\nexport type LoggingLevel = \"never\" | \"error\" | \"warning\" | \"info\" | \"debug\"\n\n/**\n * This is the default configuration that Tridactyl comes with.\n *\n * You can change anything here using `set key1.key2.key3 value` or specific things any of the various helper commands such as `bind` or `command`. You can also jump to the help section of a setting using `:help $settingname`. Some of the settings have an input field containing their current value. You can modify these values and save them by pressing `<Enter>` but using `:set $setting $value` is a good habit to take as it doesn't force you to leave the page you're visiting to change your settings.\n *\n * If the setting you are changing has a dot or period character (.) in it, it cannot be set with `:set` directly. You must either use a helper command for that specific setting - e.g. `:seturl` or `:autocontain`, or you must use Tridactyl's JavaScript API with `:js tri.config.set(\"path\", \"to\", \"key\", \"value\")` to set `{path: {to: {key: value}}}`.\n *\n */\nexport class default_config {\n    /**\n     * Internal version number Tridactyl uses to know whether it needs to update from old versions of the configuration.\n     *\n     * Changing this might do weird stuff.\n     */\n    configversion = \"0.0\"\n\n    /**\n     * Internal field to handle site-specific configs. Use :seturl/:unseturl to change these values.\n     */\n    subconfigs: { [key: string]: DeepPartial<default_config> } = {\n        \"www.google.com\": {\n            followpagepatterns: {\n                next: \"Next\",\n                prev: \"Previous\",\n            },\n        },\n        \"^https://web.whatsapp.com\": {\n            nmaps: {\n                f: \"hint -c [tabindex]:not(.two)>div,a\",\n                F: \"hint -bc [tabindex]:not(.two)>div,a\",\n            },\n        },\n    }\n\n    /**\n     * Internal field to handle mode-specific configs. Use :setmode/:unsetmode to change these values.\n     *\n     * Changing this might do weird stuff.\n     */\n    modesubconfigs: { [key: string]: DeepPartial<default_config> } = {\n        normal: {},\n        insert: {},\n        input: {},\n        ignore: {},\n        ex: {},\n        hint: {},\n        visual: {},\n    }\n\n    /**\n     * Internal field to handle site-specific config priorities. Use :seturl/:unseturl to change this value.\n     */\n    priority = 0\n\n    // Note to developers: When creating new <modifier-letter> maps, make sure to make the modifier uppercase (e.g. <C-a> instead of <c-a>) otherwise some commands might not be able to find them (e.g. `bind <c-a>`)\n\n    /**\n     * exmaps contains all of the bindings for the command line.\n     * You can of course bind regular ex commands but also [editor functions](/static/docs/modules/_src_lib_editor_.html) and [commandline-specific functions](/static/docs/modules/_src_commandline_frame_.html).\n     */\n    exmaps = {\n        \"<Enter>\": \"ex.accept_line\",\n        \"<C-Enter>\": \"ex.execute_ex_on_completion\",\n        \"<C-j>\": \"ex.accept_line\",\n        \"<C-m>\": \"ex.accept_line\",\n        \"<Escape>\": \"ex.hide_and_clear\",\n        \"<C-[>\": \"ex.hide_and_clear\",\n        \"<ArrowUp>\": \"ex.prev_history\",\n        \"<ArrowDown>\": \"ex.next_history\",\n        \"<S-Delete>\": \"ex.execute_ex_on_completion_args tabclose\",\n\n        \"<A-b>\": \"text.backward_word\",\n        \"<A-f>\": \"text.forward_word\",\n        \"<C-e>\": \"text.end_of_line\",\n        \"<A-d>\": \"text.kill_word\",\n        \"<S-Backspace>\": \"text.backward_kill_word\",\n        \"<C-u>\": \"text.backward_kill_line\",\n        \"<C-k>\": \"text.kill_line\",\n\n        \"<C-f>\": \"ex.complete\",\n        \"<Tab>\": \"ex.next_completion\",\n        \"<S-Tab>\": \"ex.prev_completion\",\n        \"<Space>\": \"ex.insert_space_or_completion\",\n        \"<C-Space>\": \"ex.insert_space\",\n\n        \"<C-o>yy\": \"ex.execute_ex_on_completion_args clipboard yank\",\n        \"<C-o>t\": \"ex.execute_ex_on_completion_args tabopen -b\",\n        \"<C-o>w\": \"ex.execute_ex_on_completion_args winopen\",\n    }\n\n    /**\n     * ignoremaps contain all of the bindings for \"ignore mode\".\n     *\n     * They consist of key sequences mapped to ex commands.\n     */\n    ignoremaps = {\n        \"<S-Insert>\": \"mode normal\",\n        \"<AC-Escape>\": \"mode normal\",\n        \"<AC-`>\": \"mode normal\",\n        \"<S-Escape>\": \"mode normal\",\n        \"<C-o>\": \"nmode normal 1 mode ignore\",\n    }\n\n    /**\n     * imaps contain all of the bindings for \"insert mode\".\n     *\n     * On top of regular ex commands, you can also bind [editor functions](/static/docs/modules/_src_lib_editor_.html) in insert mode.\n     *\n     * They consist of key sequences mapped to ex commands.\n     */\n    imaps = {\n        \"<Escape>\": \"composite unfocus | mode normal\",\n        \"<C-[>\": \"composite unfocus | mode normal\",\n        \"<C-i>\": \"editor\",\n        \"<AC-Escape>\": \"mode normal\",\n        \"<AC-`>\": \"mode normal\",\n        \"<S-Escape>\": \"mode ignore\",\n    }\n\n    /**\n     * inputmaps contain all of the bindings for \"input mode\".\n     *\n     * On top of regular ex commands, you can also bind [editor functions](/static/docs/modules/_src_lib_editor_.html) in input mode.\n     *\n     * They consist of key sequences mapped to ex commands.\n     */\n    inputmaps = {\n        \"<Tab>\": \"focusinput -n\",\n        \"<S-Tab>\": \"focusinput -N\",\n        /**\n         * Config objects with this key inherit their keys from the object specified.\n         *\n         * Only supports \"root\" objects. Subconfigs (`seturl`) work as expected.\n         *\n         * Here, this means that input mode is the same as insert mode except it has added binds for tab and shift-tab.\n         */\n        \"\uD83D\uDD77\uD83D\uDD77INHERITS\uD83D\uDD77\uD83D\uDD77\": \"imaps\",\n    }\n\n    /**\n     * Disable Tridactyl almost completely within a page, e.g. `seturl ^https?://mail.google.com disable true`. Only takes affect on page reload.\n     *\n     * You are usually better off using `blacklistadd` and `seturl [url] noiframe true` as you can then still use some Tridactyl binds, e.g. `shift-insert` for exiting ignore mode.\n     *\n     * NB: you should only use this with `seturl`. If you get trapped with Tridactyl disabled everywhere just run `tri unset superignore` in the Firefox address bar. If that still doesn't fix things, you can totally reset Tridactyl by running `tri help superignore` in the Firefox address bar, scrolling to the bottom of that page and then clicking \"Reset Tridactyl config\".\n     */\n    superignore: \"true\" | \"false\" = \"false\"\n\n    /**\n     * nmaps contain all of the bindings for \"normal mode\".\n     *\n     * They consist of key sequences mapped to ex commands.\n     */\n    nmaps = {\n        \"<A-p>\": \"pin\",\n        \"<A-m>\": \"mute toggle\",\n        \"<F1>\": \"help\",\n        o: \"fillcmdline open\",\n        O: \"current_url open\",\n        w: \"fillcmdline winopen\",\n        W: \"current_url winopen\",\n        t: \"fillcmdline tabopen\",\n        \"]]\": \"followpage next\",\n        \"[[\": \"followpage prev\",\n        \"[c\": \"urlincrement -1\",\n        \"]c\": \"urlincrement 1\",\n        \"<C-x>\": \"urlincrement -1\",\n        \"<C-a>\": \"urlincrement 1\",\n        T: \"current_url tabopen\",\n        yy: \"clipboard yank\",\n        ys: \"clipboard yankshort\",\n        yq: \"text2qr --timeout 5\",\n        yc: \"clipboard yankcanon\",\n        ym: \"clipboard yankmd\",\n        yo: \"clipboard yankorg\",\n        yt: \"clipboard yanktitle\",\n        gh: \"home\",\n        gH: \"home true\",\n        p: \"clipboard open\",\n        P: \"clipboard tabopen\",\n        j: \"scrollline 10\",\n        \"<C-e>\": \"scrollline 10\",\n        k: \"scrollline -10\",\n        \"<C-y>\": \"scrollline -10\",\n        h: \"scrollpx -50\",\n        l: \"scrollpx 50\",\n        G: \"scrollto 100\",\n        gg: \"scrollto 0\",\n        \"<C-u>\": \"scrollpage -0.5\",\n        \"<C-d>\": \"scrollpage 0.5\",\n        \"<C-f>\": \"scrollpage 1\",\n        \"<C-b>\": \"scrollpage -1\",\n        \"<C-v>\": \"nmode ignore 1 mode normal\", // Is this a terrible idea? Pentadactyl did it http://bug.5digits.org/help/pentadactyl/browsing.xhtml#send-key\n        $: \"scrollto 100 x\",\n        // \"0\": \"scrollto 0 x\", // will get interpreted as a count\n        \"^\": \"scrollto 0 x\",\n        H: \"back\",\n        L: \"forward\",\n        \"<C-o>\": \"jumpprev\",\n        \"<C-i>\": \"jumpnext\",\n        d: \"tabclose\",\n        D: \"composite tabprev; tabclose #\",\n        gx0: \"tabclosealltoleft\",\n        gx$: \"tabclosealltoright\",\n        \"<<\": \"tabmove -1\",\n        \">>\": \"tabmove +1\",\n        u: \"undo\",\n        U: \"undo window\",\n        r: \"reload\",\n        R: \"reloadhard\",\n        x: \"stop\",\n        gi: \"focusinput -l\",\n        \"g?\": \"rot13\",\n        \"g!\": \"jumble\",\n        \"g;\": \"changelistjump -1\",\n        J: \"tabprev\",\n        K: \"tabnext\",\n        gt: \"tabnext_gt\",\n        gT: \"tabprev\",\n        // \"<c-n>\": \"tabnext_gt\", // c-n is reserved for new window\n        // \"<c-p>\": \"tabprev\",\n        \"g^\": \"tabfirst\",\n        g0: \"tabfirst\",\n        g$: \"tablast\",\n        ga: \"tabaudio\",\n        gr: \"reader --old\",\n        gu: \"urlparent\",\n        gU: \"urlroot\",\n        gf: \"viewsource\",\n        \":\": \"fillcmdline_notrail\",\n        s: \"fillcmdline open search\",\n        S: \"fillcmdline tabopen search\",\n        // find mode not suitable for general consumption yet.\n        // \"/\": \"fillcmdline find\",\n        // \"?\": \"fillcmdline find -?\",\n        // n: \"findnext 1\",\n        // N: \"findnext -1\",\n        // \",<Space>\": \"nohlsearch\",\n        M: \"gobble 1 quickmark\",\n        B: \"fillcmdline taball\",\n        b: \"fillcmdline tab\",\n        ZZ: \"qall\",\n        f: \"hint\",\n        F: \"hint -b\",\n        gF: \"hint -qb\",\n        \";i\": \"hint -i\",\n        \";b\": \"hint -b\",\n        \";o\": \"hint\",\n        \";I\": \"hint -I\",\n        \";k\": \"hint -k\",\n        \";K\": \"hint -K\",\n        \";y\": \"hint -y\",\n        \";Y\": \"hint -cF img i => tri.excmds.yankimage(tri.urlutils.getAbsoluteURL(i.src))\",\n        \";p\": \"hint -p\",\n        \";h\": \"hint -h\",\n        v: \"hint -h\", // Easiest way of entering visual mode for now. Expect this bind to change\n        \";P\": \"hint -P\",\n        \";r\": \"hint -r\",\n        \";s\": \"hint -s\",\n        \";S\": \"hint -S\",\n        \";a\": \"hint -a\",\n        \";A\": \"hint -A\",\n        \";;\": \"hint -; *\",\n        \";#\": \"hint -#\",\n        \";v\": \"hint -W mpvsafe\",\n        \";V\": \"hint -V\",\n        \";w\": \"hint -w\",\n        \";t\": \"hint -W tabopen\",\n        \";O\": \"hint -W fillcmdline_notrail open \",\n        \";W\": \"hint -W fillcmdline_notrail winopen \",\n        \";T\": \"hint -W fillcmdline_notrail tabopen \",\n        \";d\": \"hint -W tabopen --discard\",\n        \";gd\": \"hint -qW tabopen --discard\",\n        \";z\": \"hint -z\",\n        \";m\": \"hint -JFc img i => tri.excmds.open('https://lens.google.com/uploadbyurl?url='+i.src)\",\n        \";M\": \"hint -JFc img i => tri.excmds.tabopen('https://lens.google.com/uploadbyurl?url='+i.src)\",\n        \";gi\": \"hint -qi\",\n        \";gI\": \"hint -qI\",\n        \";gk\": \"hint -qk\",\n        \";gy\": \"hint -qy\",\n        \";gp\": \"hint -qp\",\n        \";gP\": \"hint -qP\",\n        \";gr\": \"hint -qr\",\n        \";gs\": \"hint -qs\",\n        \";gS\": \"hint -qS\",\n        \";ga\": \"hint -qa\",\n        \";gA\": \"hint -qA\",\n        \";g;\": \"hint -q;\",\n        \";g#\": \"hint -q#\",\n        \";gv\": \"hint -qW mpvsafe\",\n        \";gw\": \"hint -qw\",\n        \";gb\": \"hint -qb\",\n        // These two don't strictly follow the \"bind is ;g[flag]\" rule but they make sense\n        \";gF\": \"hint -qb\",\n        \";gf\": \"hint -q\",\n\n        \"<S-Insert>\": \"mode ignore\",\n        \"<AC-Escape>\": \"mode ignore\",\n        \"<AC-`>\": \"mode ignore\",\n        \"<S-Escape>\": \"mode ignore\",\n        \"<Escape>\": \"composite mode normal ; hidecmdline\",\n        \"<C-[>\": \"composite mode normal ; hidecmdline\",\n        a: \"current_url bmark\",\n        A: \"bmark\",\n        zi: \"zoom 0.1 true\",\n        zo: \"zoom -0.1 true\",\n        zm: \"zoom 0.5 true\",\n        zr: \"zoom -0.5 true\",\n        zM: \"zoom 0.5 true\",\n        zR: \"zoom -0.5 true\",\n        zz: \"zoom 1\",\n        zI: \"zoom 3\",\n        zO: \"zoom 0.3\",\n        \".\": \"repeat\",\n        \"<AS-ArrowUp><AS-ArrowUp><AS-ArrowDown><AS-ArrowDown><AS-ArrowLeft><AS-ArrowRight><AS-ArrowLeft><AS-ArrowRight>ba\":\n            \"open https://www.youtube.com/watch?v=M3iOROuTuMA\",\n        m: \"gobble 1 markadd\",\n        \"`\": \"gobble 1 markjump\",\n    }\n\n    vmaps = {\n        \"<Escape>\":\n            \"composite js document.getSelection().empty(); mode normal; hidecmdline\",\n        \"<C-[>\":\n            \"composite js document.getSelection().empty(); mode normal ; hidecmdline\",\n        y: \"composite js document.getSelection().toString() | clipboard yank\",\n        s: \"composite js document.getSelection().toString() | fillcmdline open search\",\n        S: \"composite js document.getSelection().toString() | fillcmdline tabopen search\",\n        l: 'js document.getSelection().modify(\"extend\",\"forward\",\"character\")',\n        h: 'js document.getSelection().modify(\"extend\",\"backward\",\"character\")',\n        e: 'js document.getSelection().modify(\"extend\",\"forward\",\"word\")',\n        w: 'js document.getSelection().modify(\"extend\",\"forward\",\"word\"); document.getSelection().modify(\"extend\",\"forward\",\"word\"); document.getSelection().modify(\"extend\",\"backward\",\"word\"); document.getSelection().modify(\"extend\",\"forward\",\"character\")',\n        b: 'js document.getSelection().modify(\"extend\",\"backward\",\"character\"); document.getSelection().modify(\"extend\",\"backward\",\"word\"); document.getSelection().modify(\"extend\",\"forward\",\"character\")',\n        j: 'js document.getSelection().modify(\"extend\",\"forward\",\"line\")',\n        q: \"composite js document.getSelection().toString() | text2qr --timeout 5\",\n        // \"j\": 'js document.getSelection().modify(\"extend\",\"forward\",\"paragraph\")', // not implemented in Firefox\n        k: 'js document.getSelection().modify(\"extend\",\"backward\",\"line\")',\n        $: 'js document.getSelection().modify(\"extend\",\"forward\",\"lineboundary\")',\n        \"0\": 'js document.getSelection().modify(\"extend\",\"backward\",\"lineboundary\")',\n        \"=\": \"js let n = document.getSelection().anchorNode.parentNode; let s = window.getSelection(); let r = document.createRange(); s.removeAllRanges(); r.selectNodeContents(n); s.addRange(r)\",\n        o: \"js tri.visual.reverseSelection(document.getSelection())\",\n        \"\uD83D\uDD77\uD83D\uDD77INHERITS\uD83D\uDD77\uD83D\uDD77\": \"nmaps\",\n    }\n\n    hintmaps = {\n        \"<Backspace>\": \"hint.popKey\",\n        \"<Escape>\": \"hint.reset\",\n        \"<C-[>\": \"hint.reset\",\n        \"<Tab>\": \"hint.focusNextHint\",\n        \"<S-Tab>\": \"hint.focusPreviousHint\",\n        \"<ArrowUp>\": \"hint.focusTopHint\",\n        \"<ArrowDown>\": \"hint.focusBottomHint\",\n        \"<ArrowLeft>\": \"hint.focusLeftHint\",\n        \"<ArrowRight>\": \"hint.focusRightHint\",\n        \"<Enter>\": \"hint.selectFocusedHint\",\n        \"<Space>\": \"hint.selectFocusedHint\",\n    }\n\n    /**\n     * Browser-wide binds accessible in all modes and on pages where Tridactyl \"cannot run\".\n     * <!-- Note to developers: binds here need to also be listed in manifest.json -->\n     */\n    browsermaps = {\n        \"<C-,>\": \"escapehatch\",\n        \"<C-6>\": \"tab #\",\n        // \"<CS-6>\": \"tab #\", // banned by e2e tests\n    }\n\n    /**\n     * Whether to allow pages (not necessarily github) to override `/`, which is a default Firefox binding.\n     */\n    leavegithubalone: \"true\" | \"false\" = \"false\"\n\n    /**\n     * Which keys to protect from pages that try to override them. Requires [[leavegithubalone]] to be set to false.\n     */\n    blacklistkeys: string[] = [\"/\"]\n\n    /**\n     * Autocommands that run when certain events happen, and other conditions are met.\n     *\n     * Related ex command: `autocmd`.\n     */\n    autocmds = {\n        /**\n         * Commands that will be run as soon as Tridactyl loads into a page.\n         *\n         * Each key corresponds to a URL fragment which, if contained within the page URL, will run the corresponding command.\n         */\n        DocStart: {\n            // \"addons.mozilla.org\": \"mode ignore\",\n        },\n\n        /**\n         * Commands that will be run when pages are loaded.\n         *\n         * Each key corresponds to a URL fragment which, if contained within the page URL, will run the corresponding command.\n         */\n        DocLoad: {\n            \"^https://github.com/tridactyl/tridactyl/issues/new$\": \"issue\",\n        },\n\n        /**\n         * Commands that will be run when pages are unloaded.\n         *\n         * Each key corresponds to a URL fragment which, if contained within the page URL, will run the corresponding command.\n         */\n        DocEnd: {\n            // \"emacs.org\": \"sanitise history\",\n        },\n\n        /**\n         * Commands that will be run when Tridactyl first runs each time you start your browser.\n         *\n         * Each key corresponds to a javascript regex that matches the hostname of the computer Firefox is running on. Note that fetching the hostname could be a little slow, if you want to execute something unconditionally, use \".*\" as Tridactyl special-cases this pattern to avoid hostname lookups.\n         */\n        TriStart: {\n            \".*\": \"source_quiet\",\n        },\n\n        /**\n         * Commands that will be run when you enter a tab.\n         *\n         * Each key corresponds to a URL fragment which, if contained within the page URL, will run the corresponding command.\n         */\n        TabEnter: {\n            // \"gmail.com\": \"mode ignore\",\n        },\n\n        /**\n         * Commands that will be run when you leave a tab.\n         *\n         * Each key corresponds to a URL fragment which, if contained within the page URL, will run the corresponding command.\n         */\n        TabLeft: {\n            // Actually, this doesn't work because tabclose closes the current tab\n            // Too bad :/\n            // \"emacs.org\": \"tabclose\",\n        },\n\n        /**\n         * Commands that will be run when fullscreen state changes.\n         */\n        FullscreenChange: {},\n\n        /**\n         * Commands that will be run when fullscreen state is entered.\n         */\n        FullscreenEnter: {},\n\n        /**\n         * Commands that will be run when fullscreen state is left.\n         */\n        FullscreenLeft: {},\n    }\n\n    /**\n     * @deprecated Map for translating keys directly into other keys in normal-ish modes.\n     * For example, if you have an entry in this config option mapping `\u043F` to `g`,\n     * then you could type `\u043F\u043F` instead of `gg` or `\u043Fi` instead of `gi` or `;\u043F` instead\n     * of `;g`.\n     *\n     * This was primarily useful for international users, but now you can `set\n     * keyboardlayoutforce true`, which will make everything layout-independent(and work like qwerty by default),\n     * and use [[keyboardlayoutoverrides]] setting to change the desired layout.\n     *\n     *\n     * For example, you may want to map 'a' to 'q` on azerty\n     * or 'r' to 'p' if you use dvorak.\n     *\n     * Note that the current implementation does not allow you to \"chain\" keys, for example, \"a\"=>\"b\" and \"b\"=>\"c\" for \"a\"=>\"c\". You can, however, swap or rotate keys, so \"a\"=>\"b\" and \"b\"=>\"a\" will work the way you'd expect, as will \"a\"=>\"b\" and \"b\"=>\"c\" and \"c\"=>\"a\".\n     */\n    keytranslatemap = {\n        // Examples (I think >_>):\n        // \"\u0434\": \"l\", // Russian language\n        // \"\u00E9\" : \"w\", // B\u00C9PO\n        // \"h\": \"j\", // Dvorak\n        // \"n\": \"j\", // Colemak\n        // etc\n    }\n\n    /**\n     * @deprecated Whether to use the keytranslatemap.\n     * Legacy option to map one keyboard character to another, was used to emulate\n     * layout-independence. Now deprecated since you can set your layout once with [[keyboardlayoutforce]]\n     * and [[keyboardlayoutoverrides]].\n     */\n    usekeytranslatemap: \"true\" | \"false\" = \"true\"\n\n    /**\n     * Instead of fetching actual character which depends on selected layout,\n     * use machine code of a key and convert to character according to keyboardlayoutoverrides. The default layout mapping\n     * is US `qwerty`, but can be changed with [[keyboardlayoutbase]].\n     *\n     * There is a much more detailed help page towards the end of `:tutor` under the title \"Non-QWERTY layouts\".\n     *\n     * Recommended for everyone with multiple or/and non-latin keyboard layouts. Make sure [[usekeytranslatemap]] is false\n     * if you have previously used `keymap`.\n     */\n    keyboardlayoutforce: \"true\" | \"false\" = \"false\"\n\n    /**\n     * Base keyboard layout to use when [[keyboardlayoutforce]] is enabled. At the time of writing, the following layouts are supported: `qwerty, azerty, german, dvorak, uk, ca, bepo`. Requires page reload to take effect.\n     *\n     * If your layout is missing, you can contribute it with the help of https://gistpreview.github.io/?324119c773fac31651f6422087b36804 - please just open an `:issue` with your layout and we'll add it.\n     *\n     * You can manually override individual keys for a layout with [[keyboardlayoutoverrides]].\n     */\n    keyboardlayoutbase: keyof typeof keyboardlayouts = \"qwerty\"\n\n    /**\n     * Override individual keys for a layout when [[keyboardlayoutforce]] is enabled. Changes take effect only after a page reload.\n     *\n     * Key codes for printable keys for [[keyboardlayoutforce]], lower and upper register. See https://developer.mozilla.org/en-US/docs/Web/API/UI_Events/Keyboard_event_code_values for the names of each key.\n     *\n     * NB: due to a Tridactyl bug, you cannot set this using array notation as you can for, e.g. [[homepage]].\n     * You must instead set the lower and upper registers using a string with no spaces in it, for example\n     * `:set keyboardlayoutoverrides Digit2: 2\"` for the British English layout.\n     */\n    keyboardlayoutoverrides = {}\n\n    /**\n     * Automatically place these sites in the named container.\n     *\n     * Each key corresponds to a URL fragment which, if contained within the page URL, the site will be opened in a container tab instead.\n     */\n    autocontain = o({\n        // \"github.com\": \"microsoft\",\n        // \"youtube.com\": \"google\",\n    })\n\n    /**\n     * Default proxy to use for all URLs. Has to be the name of a proxy. To add a proxy, see `:help proxyadd`. NB: usage with `:seturl` is buggy, use `:autocontain -s [regex to match URL] none [proxy]` instead\n     */\n    proxy = \"\"\n\n    /**\n     * Definitions of proxies.\n     *\n     * You can add a new proxy with `proxyadd proxyname proxyurl`\n     */\n    proxies = o({\n        // \"socksName\": \"socks://hostname:port\",\n        // \"socks4\": \"socks4://hostname:port\",\n        // \"https\": \"https://username:password@hostname:port\"\n    })\n\n    /**\n     * Whether to use proxy settings.\n     *\n     * If set to `true`, all proxy settings will be ignored.\n     */\n    noproxy: \"true\" | \"false\" = \"false\"\n\n    /**\n     * Strict mode will always ensure a domain is open in the correct container, replacing the current tab if necessary.\n     *\n     * Relaxed mode is less aggressive and instead treats container domains as a default when opening a new tab.\n     */\n    autocontainmode: \"strict\" | \"relaxed\" = \"strict\"\n\n    /**\n     * Aliases for the commandline.\n     *\n     * You can make a new one with `command alias ex-command`.\n     */\n    exaliases = {\n        alias: \"command\",\n        au: \"autocmd\",\n        aucon: \"autocontain\",\n        audel: \"autocmddelete\",\n        audelete: \"autocmddelete\",\n        blacklistremove: \"autocmddelete DocStart\",\n        b: \"tab\",\n        clsh: \"clearsearchhighlight\",\n        nohlsearch: \"clearsearchhighlight\",\n        noh: \"clearsearchhighlight\",\n        o: \"open\",\n        w: \"winopen\",\n        t: \"tabopen\",\n        tabgroupabort: \"tgroupabort\",\n        tabgroupclose: \"tgroupclose\",\n        tabgroupcreate: \"tgroupcreate\",\n        tabgrouplast: \"tgrouplast\",\n        tabgroupmove: \"tgroupmove\",\n        tabgrouprename: \"tgrouprename\",\n        tabgroupswitch: \"tgroupswitch\",\n        tabnew: \"tabopen\",\n        tabm: \"tabmove\",\n        tabo: \"tabonly\",\n        tn: \"tabnext_gt\",\n        bn: \"tabnext_gt\",\n        tnext: \"tabnext_gt\",\n        bnext: \"tabnext_gt\",\n        tp: \"tabprev\",\n        tN: \"tabprev\",\n        bp: \"tabprev\",\n        bN: \"tabprev\",\n        tprev: \"tabprev\",\n        bprev: \"tabprev\",\n        tabfirst: \"tab 1\",\n        tablast: \"tab 0\",\n        bfirst: \"tabfirst\",\n        blast: \"tablast\",\n        tfirst: \"tabfirst\",\n        tlast: \"tablast\",\n        buffer: \"tab\",\n        bufferall: \"taball\",\n        bd: \"tabclose\",\n        bdelete: \"tabclose\",\n        quit: \"tabclose\",\n        q: \"tabclose\",\n        qa: \"qall\",\n        sanitize: \"sanitise\",\n        \"saveas!\": \"saveas --cleanup --overwrite\",\n        tutorial: \"tutor\",\n        h: \"help\",\n        unmute: \"mute unmute\",\n        authors: \"credits\",\n        openwith: \"hint -W\",\n        \"!\": \"exclaim\",\n        \"!s\": \"exclaim_quiet\",\n        containerremove: \"containerdelete\",\n        colours: \"colourscheme\",\n        colorscheme: \"colourscheme\",\n        colors: \"colourscheme\",\n        man: \"help\",\n        \"!js\": \"fillcmdline_tmp 3000 !js is deprecated. Please use js instead\",\n        \"!jsb\": \"fillcmdline_tmp 3000 !jsb is deprecated. Please use jsb instead\",\n        get_current_url: \"js document.location.href\",\n        current_url: \"composite get_current_url | fillcmdline_notrail \",\n        stop: \"js window.stop()\",\n        zo: \"zoom\",\n        installnative: \"nativeinstall\",\n        nativeupdate: \"updatenative\",\n        mkt: \"mktridactylrc\",\n        \"mkt!\": \"mktridactylrc -f\",\n        \"mktridactylrc!\": \"mktridactylrc -f\",\n        mpvsafe:\n            \"js -p tri.excmds.shellescape(JS_ARG).then(url => tri.excmds.exclaim_quiet('mpv --no-terminal ' + url))\",\n        drawingstop: \"mouse_mode\",\n        exto: \"extoptions\",\n        extpreferences: \"extoptions\",\n        extp: \"extpreferences\",\n        prefset: \"setpref\",\n        prefremove: \"removepref\",\n        tabclosealltoright: \"tabcloseallto right\",\n        tabclosealltoleft: \"tabcloseallto left\",\n        reibadailty: \"jumble\",\n    }\n\n    /**\n     * Used by `]]` and `[[` to look for links containing these words.\n     *\n     * Edit these if you want to add, e.g. other language support.\n     */\n    followpagepatterns = {\n        next: \"^(next|newer)\\\\b|\u00BB|>>|more\",\n        prev: \"^(prev(ious)?|older)\\\\b|\u00AB|<<\",\n    }\n\n    /**\n     * The default search engine used by `open search`. If empty string, your browser's default search engine will be used. If set to something, Tridactyl will first look at your [[searchurls]] and then at the search engines for which you have defined a keyword on `about:preferences#search`.\n     */\n    searchengine = \"\"\n\n    /**\n     * Definitions of search engines for use via `open [keyword]`.\n     *\n     * `%s` will be replaced with your whole query and `%s1`, `%s2`, ..., `%sn` will be replaced with the first, second and nth word of your query. Also supports array slicing, e.g. `%s[2:4]`, `%s[5:]`. If there are none of these patterns in your search urls, your query will simply be appended to the searchurl.\n     *\n     * Aliases are supported - for example, if you have a `google` searchurl, you can run `:set searchurls.g google` in which case `g` will act as if it was the `google` searchurl.\n     *\n     * Examples:\n     * - When running `open gi cute puppies`, with a `gi` searchurl defined with `set searchurls.gi https://www.google.com/search?q=%s&tbm=isch`, tridactyl will navigate to `https://www.google.com/search?q=cute puppies&tbm=isch`.\n     * - When running `tabopen translate en ja Tridactyl`, with a `translate` searchurl defined with `set searchurls.translate https://translate.google.com/#view=home&op=translate&sl=%s1&tl=%s2&text=%s3`, tridactyl will navigate to `https://translate.google.com/#view=home&op=translate&sl=en&tl=ja&text=Tridactyl`.\n     *\n     * [[setnull]] can be used to \"delete\" the default search engines. E.g. `setnull searchurls.google`.\n     */\n    searchurls = {\n        google: \"https://www.google.com/search?q=\",\n        googlelucky: \"https://www.google.com/search?btnI=I'm+Feeling+Lucky&q=\",\n        scholar: \"https://scholar.google.com/scholar?q=\",\n        googleuk: \"https://www.google.co.uk/search?q=\",\n        bing: \"https://www.bing.com/search?q=\",\n        duckduckgo: \"https://duckduckgo.com/?q=\",\n        yahoo: \"https://search.yahoo.com/search?p=\",\n        twitter: \"https://twitter.com/search?q=\",\n        wikipedia: \"https://en.wikipedia.org/wiki/Special:Search/\",\n        youtube: \"https://www.youtube.com/results?search_query=\",\n        amazon: \"https://www.amazon.com/s/ref=nb_sb_noss?url=search-alias%3Daps&field-keywords=\",\n        amazonuk:\n            \"https://www.amazon.co.uk/s/ref=nb_sb_noss?url=search-alias%3Daps&field-keywords=\",\n        startpage:\n            \"https://startpage.com/do/search?language=english&cat=web&query=\",\n        github: \"https://github.com/search?utf8=\u2713&q=\",\n        searx: \"https://searx.me/?category_general=on&q=\",\n        cnrtl: \"http://www.cnrtl.fr/lexicographie/\",\n        osm: \"https://www.openstreetmap.org/search?query=\",\n        mdn: \"https://developer.mozilla.org/en-US/search?q=\",\n        gentoo_wiki:\n            \"https://wiki.gentoo.org/index.php?title=Special%3ASearch&profile=default&fulltext=Search&search=\",\n        qwant: \"https://www.qwant.com/?q=\",\n    }\n\n    /**\n     * Like [[searchurls]] but must be a Javascript function that takes one argument (a single string with the remainder of the command line including spaces) and maps it to a valid href (or a promise that resolves to a valid href) that will be followed, e.g. `set jsurls.googleloud query => \"https://google.com/search?q=\" + query.toUpperCase()`\n     *\n     * NB: the href must be valid, i.e. it must include the protocol (e.g. \"http://\") and not just be e.g. \"www.\".\n     */\n    jsurls = {}\n\n    /**\n     * URL the newtab will redirect to.\n     *\n     * All usual rules about things you can open with `open` apply, with the caveat that you'll get interesting results if you try to use something that needs `nativeopen`: so don't try `about:newtab` or a `file:///` URI. You should instead use a data URI - https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs - or host a local webserver (e.g. Caddy).\n     */\n    newtab = \"\"\n\n    /**\n     * Whether `:viewsource` will use our own page that you can use Tridactyl binds on, or Firefox's default viewer, which you cannot use Tridactyl on.\n     */\n    viewsource: \"tridactyl\" | \"default\" = \"tridactyl\"\n\n    /**\n     * Pages opened with `gH`. In order to set this value, use `:set homepages [\"example.org\", \"example.net\", \"example.com\"]` and so on.\n     */\n    homepages: string[] = []\n\n    /**\n     * Characters to use in hint mode.\n     *\n     * They are used preferentially from left to right.\n     */\n    hintchars = \"hjklasdfgyuiopqwertnmzxcvb\"\n\n    /**\n     * The type of hinting to use. `vimperator` will allow you to filter links based on their names by typing non-hint chars. It is recommended that you use this in conjuction with the [[hintchars]] setting, which you should probably set to e.g, `5432167890`. \u00B4vimperator-reflow\u00B4 additionally updates the hint labels after filtering.\n     */\n    hintfiltermode: \"simple\" | \"vimperator\" | \"vimperator-reflow\" = \"simple\"\n\n    /**\n     * Whether to optimise for the shortest possible names for each hint, or to use a simple numerical ordering. If set to `numeric`, overrides `hintchars` setting.\n     */\n    hintnames: \"short\" | \"numeric\" | \"uniform\" = \"short\"\n\n    /**\n     * Whether to display the names for hints in uppercase.\n     */\n    hintuppercase: \"true\" | \"false\" = \"true\"\n\n    /**\n     * The delay in milliseconds in `vimperator` style hint modes after selecting a hint before you are returned to normal mode.\n     *\n     * The point of this is to prevent accidental execution of normal mode binds due to people typing more than is necessary to choose a hint.\n     */\n    hintdelay = 300\n\n    /**\n     * Controls whether hints should be shifted in quick-hints mode.\n     *\n     * Here's what it means: let's say you have hints from a to z but are only\n     * interested in every second hint. You first press `a`, then `c`.\n     * Tridactyl will realize that you skipped over `b`, and so that the next\n     * hint you're going to trigger is probably `e`. Tridactyl will shift all\n     * hint names so that `e` becomes `c`, `d` becomes `b`, `c` becomes `a` and\n     * so on.\n     * This means that once you pressed `c`, you can keep on pressing `c` to\n     * trigger every second hint. Only makes sense with hintnames = short.\n     */\n    hintshift: \"true\" | \"false\" = \"false\"\n\n    /**\n     * Controls whether hints should be followed automatically.\n     *\n     * If set to `false`, hints will only be followed upon confirmation. This applies to cases when there is only a single match or only one link on the page.\n     */\n    hintautoselect: \"true\" | \"false\" = \"true\"\n\n    /**\n     * Controls whether the page can focus elements for you via js\n     *\n     * NB: will break fancy editors such as CodeMirror on Jupyter. Simply use `seturl` to whitelist pages you need it on.\n     *\n     * Best used in conjunction with browser.autofocus in `about:config`\n     */\n    allowautofocus: \"true\" | \"false\" = \"true\"\n\n    /**\n     * Uses a loop to prevent focus until you interact with a page. Only recommended for use via `seturl` for problematic sites as it can be a little heavy on CPU if running on all tabs. Should be used in conjuction with [[allowautofocus]]\n     */\n    preventautofocusjackhammer: \"true\" | \"false\" = \"false\"\n\n    /**\n     * Whether to use Tridactyl's (bad) smooth scrolling.\n     */\n    smoothscroll: \"true\" | \"false\" = \"false\"\n\n    /**\n     * How viscous you want smooth scrolling to feel.\n     */\n    scrollduration = 100\n\n    /**\n     * Where to open tabs opened with `tabopen` - to the right of the current tab, or at the end of the tabs.\n     */\n    tabopenpos: \"next\" | \"last\" | \"related\" = \"next\"\n\n    /**\n     * When enabled (the default), running tabclose will close the tabs whether they are pinned or not. When disabled, tabclose will fail with an error if a tab is pinned.\n     */\n    tabclosepinned: \"true\" | \"false\" = \"true\"\n\n    /**\n     * Controls which tab order to use when numbering tabs. Either mru = sort by most recent tab or default = by tab index\n     *\n     * Applies to all places where Tridactyl numbers tabs including `:tab`, `:tabnext_gt` etc. (so, for example, with `:set tabsort mru` `2gt` would take you to the second most recently used tab, not the second tab in the tab bar).\n     */\n    tabsort: \"mru\" | \"default\" = \"default\"\n\n    /**\n     * Where to open tabs opened with hinting - as if it had been middle clicked, to the right of the current tab, or at the end of the tabs.\n     */\n    relatedopenpos: \"related\" | \"next\" | \"last\" = \"related\"\n    /**\n     * The name of the voice to use for text-to-speech. You can get the list of installed voices by running the following snippet: `js alert(window.speechSynthesis.getVoices().reduce((a, b) => a + \" \" + b.name))`\n     */\n    ttsvoice = \"default\" // chosen from the listvoices list or \"default\"\n    /**\n     * Controls text-to-speech volume. Has to be a number between 0 and 1.\n     */\n    ttsvolume = 1\n    /**\n     * Controls text-to-speech speed. Has to be a number between 0.1 and 10.\n     */\n    ttsrate = 1\n    /**\n     * Controls text-to-speech pitch. Has to be between 0 and 2.\n     */\n    ttspitch = 1\n\n    /**\n     * When set to \"nextinput\", pressing `<Tab>` after gi selects the next input.\n     *\n     * When set to \"firefox\", `<Tab>` behaves like normal, focusing the next tab-indexed element regardless of type.\n     */\n    gimode: \"nextinput\" | \"firefox\" = \"nextinput\"\n\n    /**\n     * Decides where to place the cursor when selecting non-empty input fields\n     */\n    cursorpos: \"beginning\" | \"end\" = \"end\"\n\n    /**\n     * The theme to use.\n     *\n     * Permitted values: run `:composite js tri.styling.THEMES | fillcmdline` to find out.\n     */\n    theme = \"default\"\n\n    /**\n     * Storage for custom themes\n     *\n     * Maps theme names to CSS. Predominantly used automatically by [[colourscheme]] to store themes read from disk, as documented by [[colourscheme]]. Setting this manually is untested but might work provided that [[colourscheme]] is then used to change the theme to the right theme name.\n     */\n    customthemes = {}\n\n    /**\n     * Whether to display the mode indicator or not.\n     */\n    modeindicator: \"true\" | \"false\" = \"true\"\n\n    /**\n     * Whether to display the mode indicator in various modes. Ignored if modeindicator set to false.\n     */\n    modeindicatormodes: { [key: string]: \"true\" | \"false\" } = {\n        normal: \"true\",\n        insert: \"true\",\n        input: \"true\",\n        ignore: \"true\",\n        ex: \"true\",\n        hint: \"true\",\n        visual: \"true\",\n    }\n\n    /**\n     * Milliseconds before registering a scroll in the jumplist\n     */\n    jumpdelay = 3000\n\n    /**\n     * Logging levels. Unless you're debugging Tridactyl, it's unlikely you'll ever need to change these.\n     */\n    logging: { [key: string]: LoggingLevel } = {\n        cmdline: \"warning\",\n        containers: \"warning\",\n        controller: \"warning\",\n        excmd: \"error\",\n        hinting: \"warning\",\n        messaging: \"warning\",\n        native: \"warning\",\n        performance: \"warning\",\n        state: \"warning\",\n        styling: \"warning\",\n        autocmds: \"warning\",\n    }\n\n    /**\n     * Disables the commandline iframe. Dangerous setting, use [[seturl]] to set it. If you ever set this setting to \"true\" globally and then want to set it to false again, you can do this by opening Tridactyl's preferences page from about:addons.\n     */\n    noiframe: \"true\" | \"false\" = \"false\"\n\n    /**\n     * @deprecated A list of URLs on which to not load the iframe. Use `seturl [URL] noiframe true` instead, as shown in [[noiframe]].\n     */\n    noiframeon: string[] = []\n\n    /**\n     * Insert / input mode edit-in-$EDITOR command to run\n     * This has to be a command that stays in the foreground for the whole editing session\n     * \"auto\" will attempt to find a sane editor in your path.\n     * Please send your requests to have your favourite terminal moved further up the list to /dev/null.\n     *          (but we are probably happy to add your terminal to the list if it isn't already there.)\n     *\n     * Example values:\n     * - linux: `xterm -e vim`\n     * - windows: `start cmd.exe /c \\\"vim\\\"`.\n     *\n     * Also see [:editor](/static/docs/modules/_src_excmds_.html#editor).\n     */\n    editorcmd = \"auto\"\n\n    /**\n     * Command that should be run by the [[rssexec]] ex command. Has the\n     * following format:\n     * - %u: url\n     * - %t: title\n     * - %y: type (rss, atom, xml...)\n     * Warning: This is a very large footgun. %u will be inserted without any\n     * kind of escaping, hence you must obey the following rules if you care\n     * about security:\n     * - Do not use a composite command. If you need a composite command,\n     * create an alias.\n     * - Do not use `js` or `jsb`. If you need to use them, create an alias.\n     * - Do not insert any %u, %t or %y in shell commands run by the native\n     * messenger. Use pipes instead.\n     *\n     * Here's an example of how to save an rss url in a file on your disk\n     * safely:\n     * `alias save_rss jsb -p tri.native.run(\"cat >> ~/.config.newsboat/urls\", JS_ARG)`\n     * `set rsscmd save_rss %u`\n     * This is safe because the url is passed to jsb as an argument rather than\n     * being expanded inside of the string it will execute and because it is\n     * piped to the shell command rather than being expanded inside of it.\n     */\n    rsscmd = \"yank %u\"\n\n    /**\n     * The browser executable to look for in commands such as `restart`. Not as mad as it seems if you have multiple versions of Firefox...\n     */\n    browser = \"firefox\"\n\n    /**\n     * Which clipboard to store items in. Requires the native messenger to be installed.\n     */\n    yankto: \"clipboard\" | \"selection\" | \"both\" = \"clipboard\"\n\n    /**\n     * Which clipboard to retrieve items from. Requires the native messenger to be installed.\n     *\n     * Permitted values: `clipboard`, or `selection`.\n     */\n    putfrom: \"clipboard\" | \"selection\" = \"clipboard\"\n\n    /**\n     * Clipboard command to try to get the selection from (e.g. `xsel` or `xclip`)\n     */\n    externalclipboardcmd = \"auto\"\n\n    /**\n     * Whether downloads (e.g. via ;s hint modes) appear in your download history.\n     *\n     * NB: will cause downloads to fail silently if Tridactyl is not allowed to run in private windows (regardless of whether you are trying to call it in a private window).\n     */\n    downloadsskiphistory: \"true\" | \"false\" = \"false\"\n\n    /**\n     * Set of characters that are to be considered illegal as download filenames.\n     */\n    downloadforbiddenchars = \"/\\0\"\n\n    /**\n     * Value that will be used to replace the illegal character(s), if found, in the download filename.\n     */\n    downloadforbiddenreplacement = \"_\"\n\n    /**\n     * Comma-separated list of whole filenames which, if match\n     * with the download filename, will be suffixed with the\n     * \"downloadforbiddenreplacement\" value.\n     */\n    downloadforbiddennames = \"\"\n\n    /**\n     * Set this to something weird if you want to have fun every time Tridactyl tries to update its native messenger.\n     *\n     * %TAG will be replaced with your version of Tridactyl for stable builds, or \"master\" for beta builds\n     *\n     * NB: Windows has its own platform-specific default.\n     */\n    nativeinstallcmd =\n        \"curl -fsSl https://raw.githubusercontent.com/tridactyl/native_messenger/master/installers/install.sh -o /tmp/trinativeinstall.sh && sh /tmp/trinativeinstall.sh %TAG\"\n\n    /**\n     * Used by :updatecheck and related built-in functionality to automatically check for updates and prompt users to upgrade.\n     */\n    update = {\n        /**\n         * Whether Tridactyl should check for available updates at startup.\n         */\n        nag: true,\n\n        /**\n         * How many days to wait after an update is first available until telling people.\n         */\n        nagwait: 7,\n\n        /**\n         * The version we last nagged you about. We only nag you once per version.\n         */\n        lastnaggedversion: \"1.14.0\",\n\n        /**\n         * Time we last checked for an update, milliseconds since unix epoch.\n         */\n        lastchecktime: 0,\n\n        /**\n         * Minimum interval between automatic update checks, in seconds.\n         */\n        checkintervalsecs: 60 * 60 * 24,\n    }\n\n    /**\n     * Profile directory to use with native messenger with e.g, `guiset`.\n     */\n    profiledir = \"auto\"\n\n    // Container settings\n\n    /**\n     * If enabled, tabopen opens a new tab in the currently active tab's container.\n     */\n    tabopencontaineraware: \"true\" | \"false\" = \"false\"\n\n    /**\n     * If moodeindicator is enabled, containerindicator will color the border of the mode indicator with the container color.\n     */\n    containerindicator: \"true\" | \"false\" = \"true\"\n\n    /**\n     * Autocontain directives create a container if it doesn't exist already.\n     */\n    auconcreatecontainer: \"true\" | \"false\" = \"true\"\n\n    /**\n     * Initial urls to navigate to when creating a new tab for a new tab group.\n     */\n    tabgroupnewtaburls = {}\n\n    /**\n     * Whether :tab shows completions for hidden tabs (e.g. tabs in other tab groups).\n     */\n    tabshowhidden: \"true\" | \"false\" = \"false\"\n\n    /**\n     * Number of most recent results to ask Firefox for. We display the top 20 or so most frequently visited ones.\n     */\n    historyresults = 50\n\n    /**\n     * When displaying bookmarks in history completions, how many page views to pretend they have.\n     */\n    bmarkweight = 100\n\n    /**\n     * When displaying searchurls in history completions, how many page views to pretend they have.\n     */\n    searchurlweight = 150\n\n    /**\n     * Default selector for :goto command.\n     */\n    gotoselector = \"h1, h2, h3, h4, h5, h6\"\n\n    /**\n     * General completions options - NB: options are set according to our internal completion source name - see - `src/completions/[name].ts` in the Tridactyl source.\n     */\n    completions = {\n        Goto: {\n            autoselect: \"true\",\n        },\n        Tab: {\n            /**\n             * Whether to automatically select the closest matching completion\n             */\n            autoselect: \"true\",\n            /**\n             * Whether to use unicode symbols to display tab statuses\n             */\n            statusstylepretty: \"false\",\n        },\n        TabAll: {\n            autoselect: \"true\",\n        },\n        Rss: {\n            autoselect: \"true\",\n        },\n        Bmark: {\n            autoselect: \"true\",\n        },\n        Sessions: {\n            autoselect: \"true\",\n        },\n    }\n\n    /**\n     * Number of results that should be shown in completions. -1 for unlimited\n     */\n    findresults = -1\n\n    /**\n     * Number of characters to use as context for the matches shown in completions\n     */\n    findcontextlen = 100\n\n    /**\n     * Whether find should be case-sensitive\n     */\n    findcase: \"smart\" | \"sensitive\" | \"insensitive\" = \"smart\"\n\n    /**\n     * How long find highlights should persist in milliseconds. `<= 0` means they persist until cleared\n     */\n    findhighlighttimeout = 0\n\n    /**\n     * Whether Tridactyl should jump to the first match when using `:find`\n     */\n    incsearch: \"true\" | \"false\" = \"false\"\n\n    /**\n     * How many characters should be typed before triggering incsearch/completions\n     */\n    minincsearchlen = 3\n\n    /**\n     * Deprecated.\n     * Change this to \"clobber\" to ruin the \"Content Security Policy\" of all sites a bit and make Tridactyl run a bit better on some of them, e.g. raw.github*\n     */\n    csp: \"untouched\" | \"clobber\" = \"untouched\"\n\n    /**\n     * JavaScript RegExp used to recognize words in text.* functions (e.g. text.transpose_words). Should match any character belonging to a word.\n     */\n    wordpattern = \"[^\\\\s]+\"\n\n    /**\n     * Activate tridactyl's performance counters. These have a\n     * measurable performance impact, since every sample is a few\n     * hundred bytes and we sample tridactyl densely, but they're good\n     * when you're trying to optimize things.\n     */\n    perfcounters: \"true\" | \"false\" = \"false\"\n\n    /**\n     * How many samples to store from the perf counters.\n     *\n     * Each performance entry is two numbers (16 bytes), an entryType\n     * of either \"mark\" or \"measure\" (js strings are utf-16 ad we have\n     * two marks for each measure, so amortize to about 10 bytes per\n     * entry), and a string name that for Tridactyl object will be\n     * about 40 (utf-16) characters (80 bytes), plus object overhead\n     * roughly proportional to the string-length of the name of the\n     * constructor (in this case something like 30 bytes), for a total\n     * of what we'll call 128 bytes for ease of math.\n     *\n     * We want to store, by default, about 1MB of performance\n     * statistics, so somewhere around 10k samples.\n     *\n     */\n    perfsamples = \"10000\"\n\n    /**\n     * Show (partial) command in the mode indicator.\n     * Corresponds to 'showcmd' option of vi.\n     */\n    modeindicatorshowkeys: \"true\" | \"false\" = \"false\"\n\n    /**\n     * Whether a trailing slash is appended when we get the parent of a url with\n     * gu (or other means).\n     */\n    urlparenttrailingslash: \"true\" | \"false\" = \"true\"\n\n    /**\n     * Whether to enter visual mode when text is selected. Visual mode can always be entered with `:mode visual`.\n     */\n    visualenterauto: \"true\" | \"false\" = \"true\"\n\n    /**\n     * Whether to return to normal mode when text is deselected.\n     */\n    visualexitauto: \"true\" | \"false\" = \"true\"\n\n    /**\n     * Whether to open and close the sidebar quickly to get focus back to the page when <C-,> is pressed.\n     *\n     * Disable if the fact that it closes TreeStyleTabs gets on your nerves too much : )\n     *\n     * NB: when disabled, <C-,> can't get focus back from the address bar, but it can still get it back from lots of other places (e.g. Flash-style video players)\n     */\n    escapehatchsidebarhack: \"true\" | \"false\" = \"true\"\n\n    /**\n     * Threshold for fuzzy matching on completions. Lower => stricter matching. Range between 0 and 1: 0 corresponds to perfect matches only. 1 will match anything.\n     *\n     * https://fusejs.io/api/options.html#threshold\n     */\n    completionfuzziness = 0.3\n\n    /**\n     * Whether to show article url in the document.title of Reader View.\n     */\n    readerurlintitle: \"true\" | \"false\" = \"false\"\n}\n\nconst platform_defaults = {\n    win: {\n        browsermaps: {\n            \"<C-6>\": null,\n            \"<A-6>\": \"buffer #\",\n        } as unknown, // typescript doesn't like me adding new binds like this\n        nmaps: {\n            \"<C-6>\": \"buffer #\",\n        } as unknown,\n        imaps: {\n            \"<C-6>\": \"buffer #\",\n        } as unknown,\n        inputmaps: {\n            \"<C-6>\": \"buffer #\",\n        } as unknown,\n        ignoremaps: {\n            \"<C-6>\": \"buffer #\",\n        } as unknown,\n\n        nativeinstallcmd: `powershell -ExecutionPolicy Bypass -NoProfile -Command \"\\\n[Net.ServicePointManager]::SecurityProtocol = [Net.ServicePointManager]::SecurityProtocol -bor [Net.SecurityProtocolType]::Tls12;\\\n(New-Object System.Net.WebClient).DownloadFile('https://raw.githubusercontent.com/tridactyl/native_messenger/master/installers/windows.ps1', '%TEMP%/tridactyl_installnative.ps1');\\\n& '%TEMP%/tridactyl_installnative.ps1' -Tag %TAG;\\\nRemove-Item '%TEMP%/tridactyl_installnative.ps1'\"`,\n        downloadforbiddenchars: \"#%&{}\\\\<>*?/$!'\\\":@+`|=\",\n        downloadforbiddennames:\n            \"CON, PRN, AUX, NUL, COM1, COM2,\" +\n            \"COM3, COM4, COM5, COM6, COM7, COM8, COM9, LPT1,\" +\n            \"LPT2, LPT3, LPT4, LPT5, LPT6, LPT7, LPT8, LPT9,\",\n    },\n    linux: {\n        nmaps: {\n            \";x\": 'hint -F e => { const pos = tri.dom.getAbsoluteCentre(e); tri.excmds.exclaim_quiet(\"xdotool mousemove --sync \" + window.devicePixelRatio * pos.x + \" \" + window.devicePixelRatio * pos.y + \"; xdotool click 1\")}',\n            \";X\": 'hint -F e => { const pos = tri.dom.getAbsoluteCentre(e); tri.excmds.exclaim_quiet(\"xdotool mousemove --sync \" + window.devicePixelRatio * pos.x + \" \" + window.devicePixelRatio * pos.y + \"; xdotool keydown ctrl+shift; xdotool click 1; xdotool keyup ctrl+shift\")}',\n        } as unknown,\n    },\n} as Record<browser.runtime.PlatformOs, default_config>\n\n/**\n * Key codes for printable keys for [[keyboardlayoutforce]], lower and upper register.\n * See https://developer.mozilla.org/en-US/docs/Web/API/UI_Events/Keyboard_event_code_values\n * These maps are assigned via `:set keyboardlayoutbase`\n * but keyboardlayoutoverrides can also be changed manually with `:set`.\n *\n * If your layout is missing here, you can contribute it with the help of [this](https://gistpreview.github.io/?324119c773fac31651f6422087b36804)\n * tool.\n */\nexport const keyboardlayouts = {\n    qwerty: {\n        KeyA: [\"a\", \"A\"],\n        KeyB: [\"b\", \"B\"],\n        KeyC: [\"c\", \"C\"],\n        KeyD: [\"d\", \"D\"],\n        KeyE: [\"e\", \"E\"],\n        KeyF: [\"f\", \"F\"],\n        KeyG: [\"g\", \"G\"],\n        KeyH: [\"h\", \"H\"],\n        KeyI: [\"i\", \"I\"],\n        KeyJ: [\"j\", \"J\"],\n        KeyK: [\"k\", \"K\"],\n        KeyL: [\"l\", \"L\"],\n        KeyM: [\"m\", \"M\"],\n        KeyN: [\"n\", \"N\"],\n        KeyO: [\"o\", \"O\"],\n        KeyP: [\"p\", \"P\"],\n        KeyQ: [\"q\", \"Q\"],\n        KeyR: [\"r\", \"R\"],\n        KeyS: [\"s\", \"S\"],\n        KeyT: [\"t\", \"T\"],\n        KeyU: [\"u\", \"U\"],\n        KeyV: [\"v\", \"V\"],\n        KeyW: [\"w\", \"W\"],\n        KeyX: [\"x\", \"X\"],\n        KeyY: [\"y\", \"Y\"],\n        KeyZ: [\"z\", \"Z\"],\n        Digit0: [\"0\", \")\"],\n        Digit1: [\"1\", \"!\"],\n        Digit2: [\"2\", \"@\"],\n        Digit3: [\"3\", \"#\"],\n        Digit4: [\"4\", \"$\"],\n        Digit5: [\"5\", \"%\"],\n        Digit6: [\"6\", \"^\"],\n        Digit7: [\"7\", \"&\"],\n        Digit8: [\"8\", \"*\"],\n        Digit9: [\"9\", \"(\"],\n        Equal: [\"=\", \"+\"],\n        Backquote: [\"`\", \"~\"],\n        Backslash: [\"\\\\\", \"|\"],\n        Period: [\".\", \">\"],\n        Comma: [\",\", \"<\"],\n        Semicolon: [\";\", \":\"],\n        Slash: [\"/\", \"?\"],\n        BracketLeft: [\"[\", \"{\"],\n        BracketRight: [\"]\", \"}\"],\n        Quote: [\"'\", '\"'],\n        Minus: [\"-\", \"_\"],\n    },\n    azerty: {\n        Backquote: [\"\u00B2\", \"\u00B2\"],\n        Digit1: [\"&\", \"1\"],\n        Digit2: [\"\u00E9\", \"2\"],\n        Digit3: ['\"', \"3\"],\n        Digit4: [\"'\", \"4\"],\n        Digit5: [\"(\", \"5\"],\n        Digit6: [\"-\", \"6\"],\n        Digit7: [\"\u00E8\", \"7\"],\n        Digit8: [\"_\", \"8\"],\n        Digit9: [\"\u00E7\", \"9\"],\n        Digit0: [\"\u00E0\", \"0\"],\n        Minus: [\")\", \"\u00B0\"],\n        Equal: [\"=\", \"+\"],\n        KeyQ: [\"a\", \"A\"],\n        KeyW: [\"z\", \"Z\"],\n        KeyE: [\"e\", \"E\"],\n        KeyR: [\"r\", \"R\"],\n        KeyT: [\"t\", \"T\"],\n        KeyY: [\"y\", \"Y\"],\n        KeyU: [\"u\", \"U\"],\n        KeyI: [\"i\", \"I\"],\n        KeyO: [\"o\", \"O\"],\n        KeyP: [\"p\", \"P\"],\n        BracketRight: [\"$\", \"\u00A3\"],\n        Backslash: [\"*\", \"\u00B5\"],\n        KeyA: [\"q\", \"Q\"],\n        KeyS: [\"s\", \"S\"],\n        KeyD: [\"d\", \"D\"],\n        KeyF: [\"f\", \"F\"],\n        KeyG: [\"g\", \"G\"],\n        KeyH: [\"h\", \"H\"],\n        KeyJ: [\"j\", \"J\"],\n        KeyK: [\"k\", \"K\"],\n        KeyL: [\"l\", \"L\"],\n        Semicolon: [\"m\", \"M\"],\n        Quote: [\"\u00F9\", \"%\"],\n        KeyZ: [\"w\", \"W\"],\n        KeyX: [\"x\", \"X\"],\n        KeyC: [\"c\", \"C\"],\n        KeyV: [\"v\", \"V\"],\n        KeyB: [\"b\", \"B\"],\n        KeyN: [\"n\", \"N\"],\n        KeyM: [\",\", \"?\"],\n        Comma: [\";\", \".\"],\n        Period: [\":\", \"/\"],\n        Slash: [\"!\", \"\u00A7\"],\n    },\n    german: {\n        Digit1: [\"1\", \"!\"],\n        Digit2: [\"2\", '\"'],\n        Digit3: [\"3\", \"\u00A7\"],\n        Digit4: [\"4\", \"$\"],\n        Digit5: [\"5\", \"%\"],\n        Digit6: [\"6\", \"&\"],\n        Digit7: [\"7\", \"/\"],\n        Digit8: [\"8\", \"(\"],\n        Digit9: [\"9\", \")\"],\n        Digit0: [\"0\", \"=\"],\n        Minus: [\"\u00DF\", \"?\"],\n        KeyQ: [\"q\", \"Q\"],\n        KeyW: [\"w\", \"W\"],\n        KeyE: [\"e\", \"E\"],\n        KeyR: [\"r\", \"R\"],\n        KeyT: [\"t\", \"T\"],\n        KeyY: [\"z\", \"Z\"],\n        KeyU: [\"u\", \"U\"],\n        KeyI: [\"i\", \"I\"],\n        KeyO: [\"o\", \"O\"],\n        KeyP: [\"p\", \"P\"],\n        BracketLeft: [\"\u00FC\", \"\u00DC\"],\n        BracketRight: [\"+\", \"*\"],\n        Backslash: [\"#\", \"'\"],\n        KeyA: [\"a\", \"A\"],\n        KeyS: [\"s\", \"S\"],\n        KeyD: [\"d\", \"D\"],\n        KeyF: [\"f\", \"F\"],\n        KeyG: [\"g\", \"G\"],\n        KeyH: [\"h\", \"H\"],\n        KeyJ: [\"j\", \"J\"],\n        KeyK: [\"k\", \"K\"],\n        KeyL: [\"l\", \"L\"],\n        Semicolon: [\"\u00F6\", \"\u00D6\"],\n        Quote: [\"\u00E4\", \"\u00C4\"],\n        KeyZ: [\"y\", \"Y\"],\n        KeyX: [\"x\", \"X\"],\n        KeyC: [\"c\", \"C\"],\n        KeyV: [\"v\", \"V\"],\n        KeyB: [\"b\", \"B\"],\n        KeyN: [\"n\", \"N\"],\n        KeyM: [\"m\", \"M\"],\n        Comma: [\",\", \";\"],\n        Period: [\".\", \":\"],\n        Slash: [\"-\", \"_\"],\n        Backquote: [\"\", \"\u00B0\"],\n    },\n    dvorak: {\n        Backquote: [\"`\", \"~\"],\n        Digit1: [\"1\", \"!\"],\n        Digit2: [\"2\", \"@\"],\n        Digit3: [\"3\", \"#\"],\n        Digit4: [\"4\", \"$\"],\n        Digit5: [\"5\", \"%\"],\n        Digit6: [\"6\", \"^\"],\n        Digit7: [\"7\", \"&\"],\n        Digit8: [\"8\", \"*\"],\n        Digit9: [\"9\", \"(\"],\n        Digit0: [\"0\", \")\"],\n        Minus: [\"[\", \"{\"],\n        Equal: [\"]\", \"}\"],\n        KeyQ: [\"'\", '\"'],\n        KeyW: [\",\", \"<\"],\n        KeyE: [\".\", \">\"],\n        KeyR: [\"p\", \"P\"],\n        KeyT: [\"y\", \"Y\"],\n        KeyY: [\"f\", \"F\"],\n        KeyU: [\"g\", \"G\"],\n        KeyI: [\"c\", \"C\"],\n        KeyO: [\"r\", \"R\"],\n        KeyP: [\"l\", \"L\"],\n        BracketLeft: [\"/\", \"?\"],\n        BracketRight: [\"=\", \"+\"],\n        Backslash: [\"\\\\\", \"|\"],\n        KeyA: [\"a\", \"A\"],\n        KeyS: [\"o\", \"O\"],\n        KeyD: [\"e\", \"E\"],\n        KeyF: [\"u\", \"U\"],\n        KeyG: [\"i\", \"I\"],\n        KeyH: [\"d\", \"D\"],\n        KeyJ: [\"h\", \"H\"],\n        KeyK: [\"t\", \"T\"],\n        KeyL: [\"n\", \"N\"],\n        Semicolon: [\"s\", \"S\"],\n        Quote: [\"-\", \"_\"],\n        KeyZ: [\";\", \":\"],\n        KeyX: [\"q\", \"Q\"],\n        KeyC: [\"j\", \"J\"],\n        KeyV: [\"k\", \"K\"],\n        KeyB: [\"x\", \"X\"],\n        KeyN: [\"b\", \"B\"],\n        KeyM: [\"m\", \"M\"],\n        Comma: [\"w\", \"W\"],\n        Period: [\"v\", \"V\"],\n        Slash: [\"z\", \"Z\"],\n    },\n    uk: {\n        Digit1: [\"1\", \"!\"],\n        Digit2: [\"2\", '\"'],\n        Digit3: [\"3\", \"\u00A3\"],\n        Digit4: [\"4\", \"$\"],\n        Digit5: [\"5\", \"%\"],\n        Digit6: [\"6\", \"^\"],\n        Digit7: [\"7\", \"&\"],\n        Digit8: [\"8\", \"*\"],\n        Digit9: [\"9\", \"(\"],\n        Digit0: [\"0\", \")\"],\n        Minus: [\"-\", \"_\"],\n        Equal: [\"=\", \"+\"],\n        KeyQ: [\"q\", \"Q\"],\n        KeyW: [\"w\", \"W\"],\n        KeyE: [\"e\", \"E\"],\n        KeyR: [\"r\", \"R\"],\n        KeyT: [\"t\", \"T\"],\n        KeyY: [\"y\", \"Y\"],\n        KeyU: [\"u\", \"U\"],\n        KeyI: [\"i\", \"I\"],\n        KeyO: [\"o\", \"O\"],\n        KeyP: [\"p\", \"P\"],\n        BracketLeft: [\"[\", \"{\"],\n        KeyK: [\"k\", \"K\"],\n        BracketRight: [\"]\", \"}\"],\n        KeyA: [\"a\", \"A\"],\n        KeyS: [\"s\", \"S\"],\n        KeyD: [\"d\", \"D\"],\n        KeyF: [\"f\", \"F\"],\n        KeyG: [\"g\", \"G\"],\n        KeyH: [\"h\", \"H\"],\n        KeyJ: [\"j\", \"J\"],\n        Semicolon: [\";\", \":\"],\n        Quote: [\"'\", \"@\"],\n        Backslash: [\"#\", \"~\"],\n        IntlBackslash: [\"\\\\\", \"|\"],\n        KeyZ: [\"z\", \"Z\"],\n        KeyX: [\"x\", \"X\"],\n        KeyC: [\"c\", \"C\"],\n        KeyV: [\"v\", \"V\"],\n        KeyB: [\"b\", \"B\"],\n        KeyN: [\"n\", \"N\"],\n        KeyM: [\"m\", \"M\"],\n        Period: [\".\", \">\"],\n        Slash: [\"/\", \"?\"],\n        Backquote: [\"`\", \"\u00AC\"],\n        KeyL: [\"l\", \"L\"],\n        Comma: [\",\", \"<\"],\n    },\n    ca: {\n        Backquote: [\"#\", \"|\"],\n        Digit1: [\"1\", \"!\"],\n        Digit2: [\"2\", '\"'],\n        Digit3: [\"3\", \"/\"],\n        Digit4: [\"4\", \"$\"],\n        Digit5: [\"5\", \"%\"],\n        Digit6: [\"6\", \"?\"],\n        Digit7: [\"7\", \"&\"],\n        Digit8: [\"8\", \"*\"],\n        Digit9: [\"9\", \"(\"],\n        Digit0: [\"0\", \")\"],\n        Minus: [\"-\", \"_\"],\n        Equal: [\"=\", \"+\"],\n        KeyQ: [\"q\", \"Q\"],\n        KeyW: [\"w\", \"W\"],\n        KeyE: [\"e\", \"E\"],\n        KeyR: [\"r\", \"R\"],\n        KeyT: [\"t\", \"T\"],\n        KeyY: [\"y\", \"Y\"],\n        KeyU: [\"u\", \"U\"],\n        KeyI: [\"i\", \"I\"],\n        KeyO: [\"o\", \"O\"],\n        KeyP: [\"p\", \"P\"],\n        KeyA: [\"a\", \"A\"],\n        KeyS: [\"s\", \"S\"],\n        KeyD: [\"d\", \"D\"],\n        KeyF: [\"f\", \"F\"],\n        KeyG: [\"g\", \"G\"],\n        KeyH: [\"h\", \"H\"],\n        KeyJ: [\"j\", \"J\"],\n        KeyK: [\"k\", \"K\"],\n        KeyL: [\"l\", \"L\"],\n        Semicolon: [\";\", \":\"],\n        Backslash: [\"<\", \">\"],\n        IntlBackslash: [\"\u00AB\", \"\u00BB\"],\n        KeyZ: [\"z\", \"Z\"],\n        KeyX: [\"x\", \"X\"],\n        KeyC: [\"c\", \"C\"],\n        KeyV: [\"v\", \"V\"],\n        KeyB: [\"b\", \"B\"],\n        KeyN: [\"n\", \"N\"],\n        KeyM: [\"m\", \"M\"],\n        Comma: [\",\", \"'\"],\n        Period: [\".\", \".\"],\n        Slash: [\"\u00E9\", \"\u00C9\"],\n    },\n    bepo: {\n        Backquote: [\"$\", \"#\"],\n        Digit1: ['\"', \"1\"],\n        Digit2: [\"\u00AB\", \"2\"],\n        Digit3: [\"\u00BB\", \"3\"],\n        Digit4: [\"(\", \"4\"],\n        Digit5: [\")\", \"5\"],\n        Digit6: [\"@\", \"6\"],\n        Digit7: [\"+\", \"7\"],\n        Digit8: [\"-\", \"8\"],\n        Digit9: [\"/\", \"9\"],\n        Digit0: [\"*\", \"0\"],\n        Minus: [\"=\", \"\u00B0\"],\n        Equal: [\"%\", \"`\"],\n        KeyQ: [\"b\", \"B\"],\n        KeyW: [\"\u00E9\", \"\u00C9\"],\n        KeyE: [\"p\", \"P\"],\n        KeyR: [\"o\", \"O\"],\n        KeyT: [\"\u00E8\", \"\u00C8\"],\n        KeyU: [\"v\", \"V\"],\n        KeyI: [\"d\", \"D\"],\n        KeyO: [\"l\", \"L\"],\n        KeyP: [\"j\", \"J\"],\n        BracketLeft: [\"z\", \"Z\"],\n        BracketRight: [\"w\", \"W\"],\n        KeyA: [\"a\", \"A\"],\n        KeyS: [\"u\", \"U\"],\n        KeyD: [\"i\", \"I\"],\n        KeyF: [\"e\", \"E\"],\n        KeyG: [\",\", \";\"],\n        KeyH: [\"c\", \"C\"],\n        KeyJ: [\"t\", \"T\"],\n        KeyK: [\"s\", \"S\"],\n        KeyL: [\"r\", \"R\"],\n        Semicolon: [\"n\", \"N\"],\n        Quote: [\"m\", \"M\"],\n        Backslash: [\"\u00E7\", \"\u00C7\"],\n        IntlBackslash: [\"\u00EA\", \"\u00CA\"],\n        KeyZ: [\"\u00E0\", \"\u00C0\"],\n        KeyX: [\"y\", \"Y\"],\n        KeyC: [\"x\", \"X\"],\n        KeyV: [\".\", \":\"],\n        KeyB: [\"k\", \"K\"],\n        KeyN: [\"'\", \"?\"],\n        KeyM: [\"q\", \"Q\"],\n        Comma: [\"g\", \"G\"],\n        Period: [\"h\", \"H\"],\n        Slash: [\"f\", \"F\"],\n        KeyY: [\"\", \"!\"],\n    },\n}\n\n/** @hidden\n * Merges two objects and removes all keys with null values at all levels\n */\nexport const mergeDeepCull = R.pipe(mergeDeep, removeNull)\n\n/** @hidden */\nexport const DEFAULTS = mergeDeepCull(\n    o(new default_config()),\n    platform_defaults[platform.getPlatformOs()],\n)\n\n/** Given an object and a target, extract the target if it exists, else return undefined\n\n    @param target path of properties as an array\n    @hidden\n */\nexport function getDeepProperty(obj, target: string[]) {\n    if (obj !== undefined && obj !== null && target.length) {\n        if (obj[\"\uD83D\uDD77\uD83D\uDD77INHERITS\uD83D\uDD77\uD83D\uDD77\"] === undefined) {\n            return getDeepProperty(obj[target[0]], target.slice(1))\n        } else {\n            return getDeepProperty(\n                mergeDeepCull(get(obj[\"\uD83D\uDD77\uD83D\uDD77INHERITS\uD83D\uDD77\uD83D\uDD77\"]), obj)[target[0]],\n                target.slice(1),\n            )\n        }\n    } else {\n        if (obj === undefined || obj === null) return obj\n        if (obj[\"\uD83D\uDD77\uD83D\uDD77INHERITS\uD83D\uDD77\uD83D\uDD77\"] !== undefined) {\n            return mergeDeepCull(get(obj[\"\uD83D\uDD77\uD83D\uDD77INHERITS\uD83D\uDD77\uD83D\uDD77\"]), obj)\n        } else {\n            return obj\n        }\n    }\n}\n\n/** Create the key path target if it doesn't exist and set the final property to value.\n\n    If the path is an empty array, replace the obj.\n\n    @param target path of properties as an array\n    @hidden\n */\nfunction setDeepProperty(obj, value, target) {\n    if (target.length > 1) {\n        // If necessary antecedent objects don't exist, create them.\n        if (obj[target[0]] === undefined) {\n            obj[target[0]] = o({})\n        }\n        return setDeepProperty(obj[target[0]], value, target.slice(1))\n    } else {\n        obj[target[0]] = value\n    }\n}\n\n/** @hidden\n * Merges two objects and any child objects they may have\n */\nexport function mergeDeep(o1, o2) {\n    if (o1 === null) return Object.assign({}, o2)\n    const r = Array.isArray(o1) ? o1.slice() : Object.create(o1)\n    Object.assign(r, o1, o2)\n    if (o2 === undefined) return r\n    Object.keys(o1)\n        .filter(\n            key => typeof o1[key] === \"object\" && typeof o2[key] === \"object\",\n        )\n        .forEach(key =>\n            r[key] == null\n                ? null\n                : Object.assign(r[key], mergeDeep(o1[key], o2[key])),\n        )\n    return r\n}\n\n/** @hidden\n * Gets a site-specific setting.\n */\nexport function getURL(url: string, target: string[]) {\n    function _getURL(conf, url, target) {\n        if (!conf.subconfigs) return undefined\n        // For each key\n        return (\n            Object.keys(conf.subconfigs)\n                // Keep only the ones that have a match\n                .filter(\n                    k =>\n                        url.match(k) &&\n                        getDeepProperty(conf.subconfigs[k], target) !==\n                            undefined,\n                )\n                // Sort them from lowest to highest priority, default to a priority of 10\n                .sort(\n                    (k1, k2) =>\n                        (conf.subconfigs[k1].priority || 10) -\n                        (conf.subconfigs[k2].priority || 10),\n                )\n                // Merge their corresponding value if they're objects, otherwise return the last value\n                .reduce((acc, curKey) => {\n                    const curVal = getDeepProperty(\n                        conf.subconfigs[curKey],\n                        target,\n                    )\n                    if (acc instanceof Object && curVal instanceof Object)\n                        return mergeDeep(acc, curVal)\n                    return curVal\n                }, undefined as any)\n        )\n    }\n    const user = _getURL(USERCONFIG, url, target)\n    const deflt = _getURL(DEFAULTS, url, target)\n    if (user === undefined || user === null) return deflt\n    if (typeof user !== \"object\" || typeof deflt !== \"object\") return user\n    return mergeDeepCull(deflt, user)\n}\n\n/** Get the value of the key target.\n\n    If the user has not specified a key, use the corresponding key from\n    defaults, if one exists, else undefined.\n    @hidden\n */\nexport function get(target_typed?: keyof default_config, ...target: string[]) {\n    if (target_typed === undefined) {\n        target = []\n    } else {\n        target = [target_typed as string].concat(target)\n    }\n    // Window.tri might not be defined when called from the untrusted page context\n    let loc = window.location\n    if ((window as any).tri && (window as any).tri.contentLocation)\n        loc = (window as any).tri.contentLocation\n    // If there's a site-specifing setting, it overrides global settings\n    const site = getURL(loc.href, target)\n    const user = getDeepProperty(USERCONFIG, target)\n    const defult = getDeepProperty(DEFAULTS, target)\n\n    // Merge results if there's a default value and it's not an Array or primitive.\n    if (typeof defult === \"object\") {\n        return mergeDeepCull(mergeDeepCull(defult, user), site)\n    } else {\n        if (site !== undefined) {\n            return site\n        } else if (user !== undefined) {\n            return user\n        } else {\n            return defult\n        }\n    }\n}\n\n/** Get the value of the key target.\n\n    Please only use this with targets that will be used at runtime - it skips static checks. Prefer [[get]].\n */\nexport function getDynamic(...target: string[]) {\n    return get(target[0] as keyof default_config, ...target.slice(1))\n}\n\n/** Get the value of the key target.\n\n    Please only use this with targets that will be used at runtime - it skips static checks. Prefer [[getAsync]].\n */\nexport async function getAsyncDynamic(...target: string[]) {\n    return getAsync(target[0] as keyof default_config, ...target.slice(1))\n}\n\n/** Get the value of the key target, but wait for config to be loaded from the\n    database first if it has not been at least once before.\n\n    This is useful if you are a content script and you've just been loaded.\n    @hidden\n */\nexport async function getAsync(\n    target_typed?: keyof default_config,\n    ...target: string[]\n) {\n    if (INITIALISED) {\n        // TODO: consider storing keys directly\n        const browserconfig = await browser.storage.local.get(CONFIGNAME)\n        USERCONFIG = browserconfig[CONFIGNAME] || o({})\n\n        return get(target_typed, ...target)\n    } else {\n        return new Promise(resolve =>\n            WAITERS.push(() => resolve(get(target_typed, ...target))),\n        )\n    }\n}\n\n/*\n * Replaces the configuration in your sync storage with your current configuration. Does not merge: it overwrites.\n *\n * Does not synchronise custom themes due to storage constraints.\n */\nexport async function push() {\n    const local_conf = await browser.storage.local.get(CONFIGNAME)\n    // eslint-disable-next-line @typescript-eslint/dot-notation\n    delete local_conf[CONFIGNAME][\"customthemes\"]\n    return browser.storage.sync.set(local_conf)\n}\n\n/*\n * Replaces the local configuration with the configuration from your sync storage. Does not merge: it overwrites.\n */\nexport async function pull() {\n    return browser.storage.local.set(await browser.storage.sync.get(CONFIGNAME))\n}\n\n/** @hidden\n * Like set(), but for a specific pattern.\n */\nexport function setURL(pattern, ...args) {\n    try {\n        new RegExp(pattern)\n        return set(\"subconfigs\", pattern, ...args)\n    } catch (err) {\n        if (err instanceof SyntaxError)\n            throw new SyntaxError(`invalid pattern: ${err.message}`)\n        throw err\n    }\n}\n/** Full target specification, then value\n\n    e.g.\n        set(\"nmaps\", \"o\", \"open\")\n        set(\"search\", \"default\", \"google\")\n        set(\"aucmd\", \"BufRead\", \"memrise.com\", \"open memrise.com\")\n\n    @hidden\n */\nexport async function set(...args) {\n    if (args.length < 2) {\n        throw new Error(\"You must provide at least two arguments!\")\n    }\n\n    const target = args.slice(0, args.length - 1)\n    const value = args[args.length - 1]\n\n    if (INITIALISED) {\n        // wait for storage to settle, otherwise we could clobber a previous incomplete set()\n        setDeepProperty(USERCONFIG, value, target)\n\n        return save()\n    } else {\n        setDeepProperty(USERCONFIG, value, target)\n    }\n}\n\n/** @hidden\n * Delete the key at USERCONFIG[pattern][target]\n */\nexport function unsetURL(pattern, ...target) {\n    return unset(\"subconfigs\", pattern, ...target)\n}\n\n/** Delete the key at target in USERCONFIG if it exists\n * @hidden */\nexport function unset(...target) {\n    const parent = getDeepProperty(USERCONFIG, target.slice(0, -1))\n    if (parent !== undefined) delete parent[target[target.length - 1]]\n    return save()\n}\n\n/** Save the config back to storage API.\n\n    Config is not synchronised between different instances of this module until\n    sometime after this happens.\n\n    @hidden\n */\nexport async function save() {\n    const settingsobj = o({})\n    settingsobj[CONFIGNAME] = USERCONFIG\n    return browser.storage.local.set(settingsobj)\n}\n\n/** Updates the config to the latest version.\n    Proposed semantic for config versionning:\n     - x.y -> x+1.0 : major architectural changes\n     - x.y -> x.y+1 : renaming settings/changing their types\n    There's no need for an updater if you're only adding a new setting/changing\n    a default setting\n\n    When adding updaters, don't forget to set(\"configversion\", newversionnumber)!\n    @hidden\n */\nexport async function update() {\n    // Updates a value both in the main config and in sub (=site specific) configs\n    const updateAll = (setting: string[], fn: (any) => any) => {\n        const val = getDeepProperty(USERCONFIG, setting)\n        if (val) {\n            set(...setting, fn(val))\n        }\n        const subconfigs = getDeepProperty(USERCONFIG, [\"subconfigs\"])\n        if (subconfigs) {\n            Object.keys(subconfigs)\n                .map(pattern => [pattern, getURL(pattern, setting)])\n                .filter(([_pattern, value]) => value)\n                .forEach(([pattern, value]) =>\n                    setURL(pattern, ...setting, fn(value)),\n                )\n        }\n    }\n\n    if (!get(\"configversion\")) set(\"configversion\", \"0.0\")\n\n    let updated = false\n    switch (get(\"configversion\")) {\n        case \"0.0\": {\n            try {\n                // Before we had a config system, we had nmaps, and we put them in the\n                // root namespace because we were young and bold.\n                const legacy_nmaps = await browser.storage.sync.get(\"nmaps\")\n                if (Object.keys(legacy_nmaps).length > 0) {\n                    USERCONFIG.nmaps = Object.assign(\n                        legacy_nmaps.nmaps,\n                        USERCONFIG.nmaps,\n                    )\n                }\n            } finally {\n                set(\"configversion\", \"1.0\")\n            }\n        }\n        case \"1.0\": {\n            const vimiumgi = getDeepProperty(USERCONFIG, [\"vimium-gi\"])\n            if (vimiumgi === true || vimiumgi === \"true\")\n                set(\"gimode\", \"nextinput\")\n            else if (vimiumgi === false || vimiumgi === \"false\")\n                set(\"gimode\", \"firefox\")\n            unset(\"vimium-gi\")\n            set(\"configversion\", \"1.1\")\n        }\n        case \"1.1\": {\n            const leveltostr: { [key: number]: LoggingLevel } = {\n                0: \"never\",\n                1: \"error\",\n                2: \"warning\",\n                3: \"info\",\n                4: \"debug\",\n            }\n            const logging = getDeepProperty(USERCONFIG, [\"logging\"])\n            // logging is not necessarily defined if the user didn't change default values\n            if (logging)\n                Object.keys(logging).forEach(l =>\n                    set(\"logging\", l, leveltostr[logging[l]]),\n                )\n            set(\"configversion\", \"1.2\")\n        }\n        case \"1.2\": {\n            ;[\"ignoremaps\", \"inputmaps\", \"imaps\", \"nmaps\"]\n                .map(mapname => [\n                    mapname,\n                    getDeepProperty(USERCONFIG, [mapname]),\n                ])\n                // mapobj is undefined if the user didn't define any bindings\n                .filter(([_mapname, mapobj]) => mapobj)\n                .forEach(([mapname, mapobj]) => {\n                    // For each mapping\n                    Object.keys(mapobj)\n                        // Keep only the ones with im_* functions\n                        .filter(\n                            key =>\n                                mapobj[key]?.search(\n                                    \"^im_|([^a-zA-Z0-9_-])im_\",\n                                ) >= 0,\n                        )\n                        // Replace the prefix\n                        .forEach(key =>\n                            setDeepProperty(\n                                USERCONFIG,\n                                mapobj[key].replace(\n                                    new RegExp(\"^im_|([^a-zA-Z0-9_-])im_\"),\n                                    \"$1text.\",\n                                ),\n                                [mapname, key],\n                            ),\n                        )\n                })\n            set(\"configversion\", \"1.3\")\n        }\n        case \"1.3\": {\n            ;[\n                \"priority\",\n                \"hintdelay\",\n                \"scrollduration\",\n                \"ttsvolume\",\n                \"ttsrate\",\n                \"ttspitch\",\n                \"jumpdelay\",\n                \"historyresults\",\n            ].forEach(setting => updateAll([setting], parseInt))\n            set(\"configversion\", \"1.4\")\n        }\n        case \"1.4\": {\n            ;(getDeepProperty(USERCONFIG, [\"noiframeon\"]) || []).forEach(\n                site => {\n                    setURL(site, \"noiframe\", \"true\")\n                },\n            )\n            set(\"configversion\", \"1.5\")\n        }\n        case \"1.5\": {\n            unset(\"exaliases\", \"tab\")\n            set(\"configversion\", \"1.6\")\n        }\n        case \"1.6\": {\n            const updateSetting = mapObj => {\n                if (!mapObj) return mapObj\n                if (mapObj[\" \"] !== undefined) {\n                    mapObj[\"<Space>\"] = mapObj[\" \"]\n                    delete mapObj[\" \"]\n                }\n                ;[\n                    \"<A- >\",\n                    \"<C- >\",\n                    \"<M- >\",\n                    \"<S- >\",\n                    \"<AC- >\",\n                    \"<AM- >\",\n                    \"<AS- >\",\n                    \"<CM- >\",\n                    \"<CS- >\",\n                    \"<MS- >\",\n                ].forEach(binding => {\n                    if (mapObj[binding] !== undefined) {\n                        const key = binding.replace(\" \", \"Space\")\n                        mapObj[key] = mapObj[binding]\n                        delete mapObj[binding]\n                    }\n                })\n                return mapObj\n            }\n            ;[\"nmaps\", \"exmaps\", \"imaps\", \"inputmaps\", \"ignoremaps\"].forEach(\n                settingName => updateAll([settingName], updateSetting),\n            )\n            set(\"configversion\", \"1.7\")\n        }\n        case \"1.7\": {\n            const autocontain = getDeepProperty(USERCONFIG, [\"autocontain\"])\n            unset(\"autocontain\")\n            if (autocontain !== undefined) {\n                Object.entries(autocontain).forEach(([domain, container]) => {\n                    set(\n                        \"autocontain\",\n                        `^https?://([^/]*\\\\.|)*${domain}/`,\n                        container,\n                    )\n                })\n            }\n            set(\"configversion\", \"1.8\")\n        }\n        case \"1.8\": {\n            const updateSetting = mapObj => {\n                if (!mapObj) return mapObj\n                return R.map(val => {\n                    if (val === \"\") return null\n                    return val\n                }, mapObj)\n            }\n            ;[\n                \"nmaps\",\n                \"exmaps\",\n                \"imaps\",\n                \"inputmaps\",\n                \"ignoremaps\",\n                \"hintmaps\",\n                \"vmaps\",\n            ].forEach(settingName => updateAll([settingName], updateSetting))\n            set(\"configversion\", \"1.9\")\n        }\n        case \"1.9\": {\n            const local = (await browser.storage.local.get(CONFIGNAME))[\n                CONFIGNAME\n            ] as { storageloc?: \"local\" | \"sync\" }\n            const sync = (await browser.storage.sync.get(CONFIGNAME))[\n                CONFIGNAME\n            ] as { storageloc?: \"local\" | \"sync\" }\n            // Possible combinations:\n            // storage:storageloc_setting => winning storageloc setting\n            // l:l, s:* => l\n            // l:undefined, s:l =>  l\n            // l:undefined, s:s => s\n            // l: undefined, s:undefined => s\n            // l:s, s:* =>  s\n            const current_storageloc =\n                local?.storageloc !== undefined\n                    ? local.storageloc\n                    : sync?.storageloc !== undefined\n                    ? sync.storageloc\n                    : \"sync\"\n            if (current_storageloc == \"sync\") {\n                await pull()\n            } else if (current_storageloc != \"local\") {\n                throw new Error(\n                    \"storageloc was set to something weird: \" +\n                        current_storageloc +\n                        \", automatic migration of settings was not possible.\",\n                )\n            }\n            set(\"configversion\", \"2.0\")\n            updated = true // NB: when adding a new updater, move this line to the end of it\n        }\n    }\n    return updated\n}\n\n/** Read all user configuration from storage API then notify any waiting asynchronous calls\n\n    asynchronous calls generated by getAsync.\n    @hidden\n */\nasync function init() {\n    const localConfig = await browser.storage.local.get(CONFIGNAME)\n    schlepp(localConfig[CONFIGNAME])\n\n    INITIALISED = true\n    for (const waiter of WAITERS) {\n        waiter()\n    }\n}\n\n/** @hidden */\nconst changeListeners = new Map()\n\n/** @hidden\n * @param name The name of a \"toplevel\" config setting (i.e. \"nmaps\", not \"nmaps.j\")\n * @param listener A function to call when the value of $name is modified in the config. Takes the previous and new value as parameters.\n */\nexport function addChangeListener<P extends keyof default_config>(\n    name: P,\n    listener: (old: default_config[P], neww: default_config[P]) => void,\n) {\n    let arr = changeListeners.get(name)\n    if (!arr) {\n        arr = []\n        changeListeners.set(name, arr)\n    }\n    arr.push(listener)\n}\n\n/** @hidden\n * Removes event listeners set with addChangeListener\n */\nexport function removeChangeListener<P extends keyof default_config>(\n    name: P,\n    listener: (old: default_config[P], neww: default_config[P]) => void,\n) {\n    const arr = changeListeners.get(name)\n    if (!arr) return\n    const i = arr.indexOf(listener)\n    if (i >= 0) arr.splice(i, 1)\n}\n\n/** Parse the config into a string representation of a .tridactylrc config file.\n    Tries to parse the config into sectionable chunks based on keywords.\n    Binds, aliases, autocmds and logging settings each have their own section while the rest are dumped into \"General Settings\".\n\n    @returns string The parsed config file.\n\n */\nexport function parseConfig(): string {\n    let p = {\n        conf: [],\n        binds: [],\n        aliases: [],\n        subconfigs: [],\n        aucmds: [],\n        aucons: [],\n        logging: [],\n        nulls: [],\n    }\n\n    p = parseConfigHelper(USERCONFIG, p)\n\n    const s = {\n        general: ``,\n        binds: ``,\n        aliases: ``,\n        aucmds: ``,\n        aucons: ``,\n        subconfigs: ``,\n        logging: ``,\n        nulls: ``,\n    }\n\n    if (p.conf.length > 0)\n        s.general = `\" General Settings\\n${p.conf.join(\"\\n\")}\\n\\n`\n    if (p.binds.length > 0) s.binds = `\" Binds\\n${p.binds.join(\"\\n\")}\\n\\n`\n    if (p.aliases.length > 0)\n        s.aliases = `\" Aliases\\n${p.aliases.join(\"\\n\")}\\n\\n`\n    if (p.aucmds.length > 0) s.aucmds = `\" Autocmds\\n${p.aucmds.join(\"\\n\")}\\n\\n`\n    if (p.aucons.length > 0)\n        s.aucons = `\" Autocontainers\\n${p.aucons.join(\"\\n\")}\\n\\n`\n    if (p.subconfigs.length > 0)\n        s.subconfigs = `\" Subconfig Settings\\n${p.subconfigs.join(\"\\n\")}\\n\\n`\n    if (p.logging.length > 0)\n        s.logging = `\" Logging\\n${p.logging.join(\"\\n\")}\\n\\n`\n    if (p.nulls.length > 0)\n        s.nulls = `\" Removed settings\\n${p.nulls.join(\"\\n\")}\\n\\n`\n\n    const ftdetect = `\" For syntax highlighting see https://github.com/tridactyl/vim-tridactyl\\n\" vim: set filetype=tridactyl`\n\n    return `${s.general}${s.binds}${s.subconfigs}${s.aliases}${s.aucmds}${s.aucons}${s.logging}${s.nulls}${ftdetect}`\n}\n\nconst parseConfigHelper = (pconf, parseobj, prefix = []) => {\n    for (const i of Object.keys(pconf)) {\n        if (typeof pconf[i] !== \"object\") {\n            if (prefix[0] === \"subconfigs\") {\n                const pattern = prefix[1]\n                const subconf = [...prefix.slice(2), i].join(\".\")\n                parseobj.subconfigs.push(\n                    `seturl ${pattern} ${subconf} ${pconf[i]}`,\n                )\n            } else {\n                parseobj.conf.push(\n                    `set ${[...prefix, i].join(\".\")} ${pconf[i]}`,\n                )\n            }\n        } else if (pconf[i] === null) {\n            parseobj.nulls.push(`setnull ${[...prefix, i].join(\".\")}`)\n        } else {\n            for (const e of Object.keys(pconf[i])) {\n                if (binding.modeMaps.includes(i)) {\n                    let cmd = \"bind\"\n                    if (prefix[0] === \"subconfigs\")\n                        cmd = cmd + \"url \" + prefix[1]\n\n                    if (i !== \"nmaps\") {\n                        const mode = binding.maps2mode.get(i)\n                        cmd += ` --mode=${mode}`\n                    }\n\n                    if (pconf[i][e] === null) {\n                        parseobj.binds.push(`un${cmd} ${e}`)\n                        continue\n                    }\n\n                    if (pconf[i][e].length > 0) {\n                        parseobj.binds.push(`${cmd} ${e} ${pconf[i][e]}`)\n                    } else {\n                        parseobj.binds.push(`un${cmd} ${e}`)\n                    }\n                } else if (pconf[i][e] === null) {\n                    parseobj.nulls.push(`setnull ${i}.${e}`)\n                } else if (i === \"exaliases\") {\n                    // Only really useful if mapping the entire config and not just pconf.\n                    if (e === \"alias\") {\n                        parseobj.aliases.push(`command ${e} ${pconf[i][e]}`)\n                    } else {\n                        parseobj.aliases.push(`alias ${e} ${pconf[i][e]}`)\n                    }\n                } else if (i === \"autocmds\") {\n                    for (const a of Object.keys(pconf[i][e])) {\n                        parseobj.aucmds.push(\n                            `autocmd ${e} ${a} ${pconf[i][e][a]}`,\n                        )\n                    }\n                } else if (i === \"autocontain\") {\n                    parseobj.aucons.push(`autocontain ${e} ${pconf[i][e]}`)\n                } else if (i === \"logging\") {\n                    // Map the int values in e to a log level\n                    let level\n                    if (pconf[i][e] === 0) level = \"never\"\n                    if (pconf[i][e] === 1) level = \"error\"\n                    if (pconf[i][e] === 2) level = \"warning\"\n                    if (pconf[i][e] === 3) level = \"info\"\n                    if (pconf[i][e] === 4) level = \"debug\"\n                    parseobj.logging.push(`set logging.${e} ${level}`)\n                } else if (i === \"customthemes\") {\n                    // Skip custom themes for now because writing their CSS is hard\n                    // parseobj.themes.push(`colourscheme ${e}`) // TODO: check if userconfig.theme == e and write this, otherwise don't.\n                } else {\n                    parseConfigHelper(pconf[i], parseobj, [...prefix, i])\n                    break\n                }\n            }\n        }\n    }\n    return parseobj\n}\n\n// Listen for changes to the storage and update the USERCONFIG if appropriate.\n// TODO: BUG! Sync and local storage are merged at startup, but not by this thing.\nbrowser.storage.onChanged.addListener((changes, areaname) => {\n    if (CONFIGNAME in changes) {\n        const { newValue, oldValue } = changes[CONFIGNAME]\n        const old = oldValue || {}\n\n        function triggerChangeListeners(key, value = newValue[key]) {\n            const arr = changeListeners.get(key)\n            if (arr) {\n                const v = old[key] === undefined ? DEFAULTS[key] : old[key]\n                arr.forEach(f => f(v, value))\n            }\n        }\n\n        if (areaname === \"sync\") {\n            // Probably do something here with push/pull?\n        } else if (newValue !== undefined) {\n            // A key has been :unset if it exists in USERCONFIG and doesn't in changes and if its value in USERCONFIG is different from the one it has in default_config\n            const unsetKeys = Object.keys(old).filter(\n                k =>\n                    newValue[k] === undefined &&\n                    JSON.stringify(old[k]) !== JSON.stringify(DEFAULTS[k]),\n            )\n\n            // A key has changed if it is defined in USERCONFIG and its value in USERCONFIG is different from the one in `changes` or if the value in defaultConf is different from the one in `changes`\n            const changedKeys = Object.keys(newValue).filter(\n                k =>\n                    JSON.stringify(\n                        old[k] !== undefined ? old[k] : DEFAULTS[k],\n                    ) !== JSON.stringify(newValue[k]),\n            )\n\n            // TODO: this should be a deep comparison but this is better than nothing\n            changedKeys.forEach(key => (USERCONFIG[key] = newValue[key]))\n            unsetKeys.forEach(key => delete USERCONFIG[key])\n\n            // Trigger listeners\n            unsetKeys.forEach(key => triggerChangeListeners(key, DEFAULTS[key]))\n\n            changedKeys.forEach(key => triggerChangeListeners(key))\n        } else {\n            // newValue is undefined when calling browser.storage.AREANAME.clear()\n            // If newValue is undefined and AREANAME is the same value as STORAGELOC, the user wants to clean their config\n            USERCONFIG = o({})\n\n            Object.keys(old)\n                .filter(key => old[key] !== DEFAULTS[key])\n                .forEach(key => triggerChangeListeners(key))\n        }\n    }\n})\n\ninit()\n", "// This file is only loaded in tridacyl's help pages\n\nimport * as config from \"@src/lib/config\"\nimport { modeMaps } from \"@src/lib/binding\"\n\n/** Create the element that should contain keybinding information */\nfunction initTridactylSettingElem(\n    elem: HTMLElement,\n    kind: string,\n): HTMLElement {\n    let bindingNode = elem.getElementsByClassName(`Tridactyl${kind}`)[0]\n    if (bindingNode) {\n        Array.from(bindingNode.children)\n            .filter(e => e.tagName === \"SPAN\")\n            .forEach(e => e.parentNode.removeChild(e))\n    } else {\n        // Otherwise, create it\n        bindingNode = document.createElement(\"p\")\n        bindingNode.className = `TridactylSetting Tridactyl${kind}`\n        bindingNode.textContent = kind + \":\u00A0\"\n        elem.insertBefore(bindingNode, elem.children[2])\n    }\n    return bindingNode as HTMLElement\n}\n\n/** Return an object that maps excmd names to excmd documentation element */\nfunction getCommandElements() {\n    return Array.from(\n        document.querySelectorAll(\n            \".tsd-panel.tsd-member.tsd-kind-function.tsd-parent-kind-external-module\",\n        ),\n    ).reduce((all, elem) => {\n        const fnName = Array.from(elem.children).find(e => e.tagName === \"H3\")\n        if (fnName) all[fnName.textContent] = elem\n        return all\n    }, {})\n}\n\n/** Update the doc with aliases fetched from the config */\nasync function addSetting(settingName: string) {\n    const commandElems = getCommandElements()\n    // We're ignoring composite because it combines multiple excmds\n    delete (commandElems as any).composite\n\n    // Initialize or reset the <p> element that will contain settings in each commandElem\n    const settingElems: { [key: string]: HTMLElement } = Object.keys(\n        commandElems,\n    ).reduce((settingElems, cmdName) => {\n        settingElems[cmdName] = initTridactylSettingElem(\n            commandElems[cmdName],\n            settingName,\n        )\n        return settingElems\n    }, {})\n\n    const settings = await config.getAsyncDynamic(settingName)\n    // For each setting\n    for (const setting of Object.keys(settings)) {\n        let excmd = settings[setting].split(\" \")\n        // How can we automatically detect what commands can be skipped?\n        excmd = [\"composite\", \"fillcmdline\", \"current_url\"].includes(excmd[0])\n            ? excmd[1]\n            : excmd[0]\n        // Find the corresponding setting\n        while (settings[excmd]) {\n            excmd = settings[excmd].split(\" \")\n            excmd = [\"fillcmdline\", \"current_url\"].includes(excmd[0])\n                ? excmd[1]\n                : excmd[0]\n        }\n\n        // If there is an HTML element for settings that correspond to the excmd we just found\n        if (settingElems[excmd]) {\n            const settingSpan = document.createElement(\"span\")\n            settingSpan.innerText = setting\n            settingSpan.title = settings[setting]\n            // Add the setting to the element\n            settingElems[excmd].appendChild(settingSpan)\n            settingElems[excmd].appendChild(document.createTextNode(\" \"))\n        }\n    }\n\n    // Remove all settingElems that do not have at least one setting\n    Object.values(settingElems)\n        .filter(\n            (e: HTMLElement) =>\n                !Array.from(e.children).find(c => c.tagName === \"SPAN\"),\n        )\n        .forEach((e: HTMLElement) => e.parentNode.removeChild(e))\n}\n\nasync function onExcmdPageLoad() {\n    browser.storage.onChanged.addListener((changes) => {\n        if (\"userconfig\" in changes) {\n            // JSON.stringify for comparisons like it's 2012\n            ;[...modeMaps, \"exaliases\"].forEach(kind => {\n                if (\n                    JSON.stringify(changes.userconfig.newValue[kind]) !==\n                    JSON.stringify(changes.userconfig.oldValue[kind])\n                )\n                    addSetting(kind)\n            })\n        }\n    })\n\n    await Promise.all([...modeMaps, \"exaliases\"].map(addSetting))\n    // setCommandSetting() can change the height of nodes in the page so we need to scroll to the right place again\n    if (document.location.hash) {\n        /* tslint:disable:no-self-assignment */\n        document.location.hash = document.location.hash\n    }\n}\n\nfunction addSettingInputs() {\n    const inputClassName = \" TridactylSettingInput \"\n    const inputClassNameModified =\n        inputClassName + \" TridactylSettingInputModified \"\n\n    const onKeyUp = async ev => {\n        const input = ev.target\n        if (ev.key === \"Enter\") {\n            ;(window as any).tri.messaging.message(\n                \"controller_background\",\n                \"acceptExCmd\",\n                [\"set \" + input.name + \" \" + input.value],\n            )\n        } else {\n            if (\n                input.value === (await config.getAsync(input.name.split(\".\")))\n            ) {\n                input.className = inputClassName\n            } else {\n                input.className = inputClassNameModified\n            }\n        }\n    }\n\n    return Promise.all(\n        Array.from(\n            document.querySelectorAll<HTMLAnchorElement>(\"a.tsd-anchor\"),\n        ).map(\n            async (a: HTMLAnchorElement) => {\n                const section = a.parentNode\n\n                const settingName = a.name.split(\".\")\n                const value = await config.getAsyncDynamic(...settingName)\n                if (!value) return console.log(\"Failed to grab value of \", a)\n                if (![\"number\", \"boolean\", \"string\"].includes(typeof value))\n                    return console.log(\n                        \"Not embedding value of \",\n                        a,\n                        value,\n                        \" because not easily represented as string\",\n                    )\n\n                const input = document.createElement(\"input\")\n                input.name = a.name\n                input.value = value\n                input.id = \"TridactylSettingInput_\" + input.name\n                input.className = inputClassName\n                input.addEventListener(\"keyup\", onKeyUp)\n\n                const div = document.createElement(\"div\")\n                div.appendChild(document.createTextNode(\"Current value:\"))\n                div.appendChild(input)\n\n                section.appendChild(div)\n\n                config.addChangeListener(input.name as any, (_, newValue) => {\n                    input.value = newValue\n                    input.className = inputClassName\n                })\n            },\n            // Adding elements expands sections so if the user wants to see a specific hash, we need to focus it again\n        ),\n    ).then(_ => {\n        if (document.location.hash) {\n            /* tslint:disable:no-self-assignment */\n            document.location.hash = document.location.hash\n        }\n    })\n}\n\nfunction addResetConfigButton() {\n    const button = document.createElement(\"button\")\n    button.innerText = \"Reset Tridactyl config\"\n    button.style.margin = \"auto 50%\"\n    button.style.minWidth = \"200pt\"\n    button.addEventListener(\"click\", () => {\n        const sentence =\n            \"sanitise tridactylsync tridactyllocal tridactylhistory\"\n        const p = prompt(\n            `Please write '${sentence}' without quotes in the following input field if you really want to reset your Tridactyl config.`,\n        )\n        if (p === sentence) {\n            ;(window as any).tri.messaging\n                .message(\"controller_background\", \"acceptExCmd\", sentence)\n                .then(_ => alert(\"Config reset!\"))\n        } else {\n            alert(`Config not reset because '${p}' !== '${sentence}'`)\n        }\n    })\n    document.querySelector(\"div.container.container-main\").appendChild(button)\n}\n\nfunction onSettingsPageLoad() {\n    addResetConfigButton()\n    return addSettingInputs()\n}\n\naddEventListener(\n    \"load\",\n    (() => {\n        switch (document.location.pathname) {\n            case \"/static/docs/modules/_src_excmds_.html\":\n                return onExcmdPageLoad\n            case \"/static/docs/classes/_src_lib_config_.default_config.html\":\n                return onSettingsPageLoad\n        }\n\n        // If we're on a different help page we don't need any side-effects\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        return () => {}\n    })(),\n)\n"],
  "mappings": "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",
  "names": ["Parser", "grammar", "Grammar", "pad", "curryN", "XWrap", "bind", "XMap", "_xmap", "_isArguments", "contains", "keys", "map", "slice", "pad", "_toISOString", "XFilter", "_xfilter", "reject", "is", "when", "Parser", "grammar", "reject", "Parser", "url", "target", "triggerChangeListeners", "settingElems"]
}
